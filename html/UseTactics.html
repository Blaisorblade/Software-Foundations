<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1"/>
<link href="coqdoc.css" rel="stylesheet" type="text/css"/>
<title>UseTactics: Tactic Library for Coq: a gentle introduction</title>
</head>

<body>

<div id="page">

<div id="header">
</div>

<div id="main">

<h1 class="libtitle">UseTactics<span class="subtitle">Tactic Library for Coq: a gentle introduction</span></h1>

<div class="code code-tight">
</div>

<div class="doc">

</div>
<div class="code code-tight">

<br/>
<span class="comment">(*&nbsp;$Date:&nbsp;2011-04-20&nbsp;14:26:52&nbsp;-0400&nbsp;(Wed,&nbsp;20&nbsp;Apr&nbsp;2011)&nbsp;$&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;Chapter&nbsp;maintained&nbsp;by&nbsp;Arthur&nbsp;Chargueraud&nbsp;*)</span><br/>

<br/>
</div>

<div class="doc">
Coq comes with a set of builtin tactics, such as <span class="inlinecode"><span class="id" type="tactic">reflexivity</span></span>,
    <span class="inlinecode"><span class="id" type="tactic">intros</span></span>, <span class="inlinecode"><span class="id" type="tactic">inversion</span></span> and so on. While it is possible to conduct 
    proofs using only those tactics, you can significantly increase 
    your productivity by working with a set of more powerful tactics. 
    This chapter describes a number of such very useful tactics, which, 
    for various reasons, are not yet available by default in Coq.
    These tactics are defined in the <span class="inlinecode"><span class="id" type="var">LibTactics.v</span></span> file. 
</div>
<div class="code code-tight">

<br/>
<span class="id" type="keyword">Require</span> <span class="id" type="keyword">Import</span> <a class="idref" href="LibTactics.html#"><span class="id" type="library">LibTactics</span></a>.<br/>

<br/>
</div>

<div class="doc">
Remark: SSReflect is another package providing powerful tactics.
    The library "LibTactics" differs from "SSReflect" in two respects:

<div class="paragraph"> </div>

<ul class="doclist">
<li> "SSReflect" was primarily developed for proving mathematical
          theorems, whereas "LibTactics" was primarily developed for proving
          theorems on programming languages. In particular, "LibTactics" 
          provides a number of useful tactics that have no counterpart in the 
          "SSReflect" package.

</li>
<li> "SSReflect" entirely rethinks the presentation of tactics,
          whereas "LibTactics" mostly stick to the traditional
          presentation of Coq tactics, simply providing a number of
          additional tactics.  For this reason, "LibTactics" is
          probably easier to get started with than "SSReflect". 
</li>
</ul>

<div class="paragraph"> </div>

 This chapter is a tutorial focusing on the most useful features
    from the "LibTactics" library. It does not aim at presenting all
    the features of "LibTactics". The complete documentation of the
    tactics can be found in the source file <span class="inlinecode"><span class="id" type="var">LibTactics.v</span></span>. Moreover,
    demos illustrating the working of all the tactics can be found in
    the file <span class="inlinecode"><span class="id" type="var">LibTacticsDemos.v</span></span>. 
<div class="paragraph"> </div>

 The tactics are illustrated mostly through examples taken from the 
    core chapters of the "Software Foundations" course. To illustrate 
    the various ways in which a given tactic can be used, we'll use a 
    tactic that duplicates a given goal. More precisely, <span class="inlinecode"><span class="id" type="var">dup</span></span> produces 
    two copies of the current goal, and <span class="inlinecode"><span class="id" type="var">dup</span></span> <span class="inlinecode"><span class="id" type="var">n</span></span> produces <span class="inlinecode"><span class="id" type="var">n</span></span> copies of it. 
<div class="paragraph"> </div>

<a name="lab746"></a><h1 class="section">Tactics for introduction and case analysis</h1>

<div class="paragraph"> </div>

 This section presents the following tactics:

<div class="paragraph"> </div>

<ul class="doclist">
<li> <span class="inlinecode"><span class="id" type="var">introv</span></span>, for saving time in the naming of hypotheses,

</li>
<li> <span class="inlinecode"><span class="id" type="var">inverts</span></span>, for improving the <span class="inlinecode"><span class="id" type="tactic">inversion</span></span> tactic,

</li>
<li> <span class="inlinecode"><span class="id" type="var">cases</span></span>, for performing a case analysis without losing information,

</li>
<li> <span class="inlinecode"><span class="id" type="var">cases_if</span></span>, for automating case analysis on the argument of <span class="inlinecode"><span class="id" type="keyword">if</span></span>. 
</li>
</ul>

<div class="paragraph"> </div>

<a name="lab747"></a><h2 class="section">The tactic <span class="inlinecode"><span class="id" type="var">introv</span></span></h2>

</div>
<div class="code code-space">

<br/>
<span class="id" type="keyword">Module</span> <a name="IntrovExamples"><span class="id" type="module">IntrovExamples</span></a>.<br/>
&nbsp;&nbsp;<span class="id" type="keyword">Require</span> <span class="id" type="keyword">Import</span> <a class="idref" href="Stlc.html#"><span class="id" type="library">Stlc</span></a>.<br/>
&nbsp;&nbsp;<span class="id" type="keyword">Import</span> <span class="id" type="var">Imp</span> <span class="id" type="var">STLC</span>.<br/>

<br/>
</div>

<div class="doc">
The tactic <span class="inlinecode"><span class="id" type="var">introv</span></span> allows to automatically introduce the 
    variables of a theorem and explicitly name the hypotheses 
    involved. In the example shown next, the variables <span class="inlinecode"><span class="id" type="var">c</span></span>, 
    <span class="inlinecode"><span class="id" type="var">st</span></span>, <span class="inlinecode"><span class="id" type="var">st1</span></span> and <span class="inlinecode"><span class="id" type="var">st2</span></span> involved in the statement of determinacy
    need not be named explicitly, because their name where already
    given in the statement of the lemma. On the contrary, it is
    useful to provide names for the two hypotheses, <span class="inlinecode"><span class="id" type="var">E1</span></span> and <span class="inlinecode"><span class="id" type="var">E2</span></span>. 
</div>
<div class="code code-tight">

<br/>
<span class="id" type="keyword">Theorem</span> <a name="IntrovExamples.ceval_deterministic"><span class="id" type="lemma">ceval_deterministic</span></a>: <span style="font-family: arial;">&forall;</span> <span class="id" type="var">c</span> <span class="id" type="var">st</span> <span class="id" type="var">st1</span> <span class="id" type="var">st2</span>,<br/>
&nbsp;&nbsp;<span class="id" type="var">c</span> / <span class="id" type="var">st</span> <span style="font-family: arial;">&dArr;</span> <span class="id" type="var">st1</span> <span style="font-family: arial;">&rarr;</span><br/>
&nbsp;&nbsp;<span class="id" type="var">c</span> / <span class="id" type="var">st</span> <span style="font-family: arial;">&dArr;</span> <span class="id" type="var">st2</span> <span style="font-family: arial;">&rarr;</span><br/>
&nbsp;&nbsp;<span class="id" type="var">st1</span> = <span class="id" type="var">st2</span>.<br/>
<span class="id" type="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" type="var">introv</span> <span class="id" type="var">E1</span> <span class="id" type="var">E2</span>. <span class="comment">(*&nbsp;was&nbsp;<span class="inlinecode"><span class="id" type="tactic">intros</span></span> <span class="inlinecode"><span class="id" type="var">c</span></span> <span class="inlinecode"><span class="id" type="var">st</span></span> <span class="inlinecode"><span class="id" type="var">st1</span></span> <span class="inlinecode"><span class="id" type="var">st2</span></span> <span class="inlinecode"><span class="id" type="var">E1</span></span> <span class="inlinecode"><span class="id" type="var">E2</span></span>&nbsp;*)</span><br/>
<span class="id" type="var">Admitted</span>.<br/>

<br/>
</div>

<div class="doc">
When there is no hypothesis to be named, one can call 
    <span class="inlinecode"><span class="id" type="var">introv</span></span> without any argument. 
</div>
<div class="code code-tight">

<br/>
<span class="id" type="keyword">Theorem</span> <a name="IntrovExamples.ceval_and_ceval_step_coincide"><span class="id" type="lemma">ceval_and_ceval_step_coincide</span></a>: <span style="font-family: arial;">&forall;</span> <span class="id" type="var">c</span> <span class="id" type="var">st</span> <span class="id" type="var">st'</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="var">c</span> / <span class="id" type="var">st</span> <span style="font-family: arial;">&dArr;</span> <span class="id" type="var">st'</span><br/>
&nbsp;&nbsp;<span style="font-family: arial;">&harr;</span> <span style="font-family: arial;">&exist;</span> <span class="id" type="var">i</span>, <a class="idref" href="Imp.html#ceval_step"><span class="id" type="definition">ceval_step</span></a> <span class="id" type="var">st</span> <span class="id" type="var">c</span> <span class="id" type="var">i</span> = <span class="id" type="constructor">Some</span> <span class="id" type="var">st'</span>.<br/>
<span class="id" type="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" type="var">introv</span>. <span class="comment">(*&nbsp;was&nbsp;<span class="inlinecode"><span class="id" type="tactic">intros</span></span> <span class="inlinecode"><span class="id" type="var">c</span></span> <span class="inlinecode"><span class="id" type="var">st</span></span> <span class="inlinecode"><span class="id" type="var">st'</span></span>&nbsp;*)</span><br/>
<span class="id" type="var">Admitted</span>.<br/>

<br/>
</div>

<div class="doc">
The tactic <span class="inlinecode"><span class="id" type="var">introv</span></span> also applies to statements in which
    <span class="inlinecode"><span style="font-family: arial;">&forall;</span></span> and <span class="inlinecode"><span style="font-family: arial;">&rarr;</span></span> are interleaved. 
</div>
<div class="code code-tight">

<br/>
<span class="id" type="keyword">Theorem</span> <a name="IntrovExamples.ceval_deterministic'"><span class="id" type="lemma">ceval_deterministic'</span></a>: <span style="font-family: arial;">&forall;</span> <span class="id" type="var">c</span> <span class="id" type="var">st</span> <span class="id" type="var">st1</span>,<br/>
&nbsp;&nbsp;(<span class="id" type="var">c</span> / <span class="id" type="var">st</span> <span style="font-family: arial;">&dArr;</span> <span class="id" type="var">st1</span>) <span style="font-family: arial;">&rarr;</span> <span style="font-family: arial;">&forall;</span> <span class="id" type="var">st2</span>, (<span class="id" type="var">c</span> / <span class="id" type="var">st</span> <span style="font-family: arial;">&dArr;</span> <span class="id" type="var">st2</span>) <span style="font-family: arial;">&rarr;</span> <span class="id" type="var">st1</span> = <span class="id" type="var">st2</span>.<br/>
<span class="id" type="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" type="var">introv</span> <span class="id" type="var">E1</span> <span class="id" type="var">E2</span>. <span class="comment">(*&nbsp;was&nbsp;<span class="inlinecode"><span class="id" type="tactic">intros</span></span> <span class="inlinecode"><span class="id" type="var">c</span></span> <span class="inlinecode"><span class="id" type="var">st</span></span> <span class="inlinecode"><span class="id" type="var">st1</span></span> <span class="inlinecode"><span class="id" type="var">E1</span></span> <span class="inlinecode"><span class="id" type="var">st2</span></span> <span class="inlinecode"><span class="id" type="var">E2</span></span>&nbsp;*)</span><br/>
<span class="id" type="var">Admitted</span>.<br/>

<br/>
</div>

<div class="doc">
Like the arguments of <span class="inlinecode"><span class="id" type="tactic">intros</span></span>, the arguments of <span class="inlinecode"><span class="id" type="var">introv</span></span> 
    can be structured patterns. 
</div>
<div class="code code-tight">

<br/>
<span class="id" type="keyword">Theorem</span> <a name="IntrovExamples.ceval_step__ceval"><span class="id" type="lemma">ceval_step__ceval</span></a>: <span style="font-family: arial;">&forall;</span> <span class="id" type="var">c</span> <span class="id" type="var">st</span> <span class="id" type="var">st'</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span style="font-family: arial;">&exist;</span> <span class="id" type="var">i</span>, <a class="idref" href="Imp.html#ceval_step"><span class="id" type="definition">ceval_step</span></a> <span class="id" type="var">st</span> <span class="id" type="var">c</span> <span class="id" type="var">i</span> = <span class="id" type="constructor">Some</span> <span class="id" type="var">st'</span>) <span style="font-family: arial;">&rarr;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="var">c</span> / <span class="id" type="var">st</span> <span style="font-family: arial;">&dArr;</span> <span class="id" type="var">st'</span>.<br/>
<span class="id" type="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" type="var">introv</span> [<span class="id" type="var">i</span> <span class="id" type="var">E</span>].<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;was&nbsp;<span class="inlinecode"><span class="id" type="tactic">intros</span></span> <span class="inlinecode"><span class="id" type="var">c</span></span> <span class="inlinecode"><span class="id" type="var">st</span></span> <span class="inlinecode"><span class="id" type="var">st'</span></span> <span class="inlinecode">[<span class="id" type="var">i</span></span> <span class="inlinecode"><span class="id" type="var">E</span>].</span>,&nbsp;which&nbsp;is&nbsp;itself&nbsp;short&nbsp;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;for&nbsp;<span class="inlinecode"><span class="id" type="tactic">intros</span></span> <span class="inlinecode"><span class="id" type="var">c</span></span> <span class="inlinecode"><span class="id" type="var">st</span></span> <span class="inlinecode"><span class="id" type="var">st'</span></span> <span class="inlinecode"><span class="id" type="var">H</span>.</span> <span class="inlinecode"><span class="id" type="tactic">destruct</span></span> <span class="inlinecode"><span class="id" type="var">H</span></span> <span class="inlinecode"><span class="id" type="keyword">as</span></span> <span class="inlinecode">[<span class="id" type="var">i</span></span> <span class="inlinecode"><span class="id" type="var">E</span>].</span>&nbsp;*)</span><br/>
<span class="id" type="var">Admitted</span>.<br/>

<br/>
</div>

<div class="doc">
Remark: the tactic <span class="inlinecode"><span class="id" type="var">introv</span></span> works even when definitions 
    need to be unfolded in order to reveal hypotheses. 
</div>
<div class="code code-tight">

<br/>
<span class="id" type="keyword">End</span> <a class="idref" href="UseTactics.html#"><span class="id" type="module">IntrovExamples</span></a>.<br/>

<br/>
</div>

<div class="doc">
<a name="lab748"></a><h2 class="section">The tactic <span class="inlinecode"><span class="id" type="var">inverts</span></span></h2>

</div>
<div class="code code-space">

<br/>
<span class="id" type="keyword">Module</span> <a name="InvertsExamples"><span class="id" type="module">InvertsExamples</span></a>.<br/>
&nbsp;&nbsp;<span class="id" type="keyword">Require</span> <span class="id" type="keyword">Import</span> <a class="idref" href="Stlc.html#"><span class="id" type="library">Stlc</span></a> <a class="idref" href="Equiv.html#"><span class="id" type="library">Equiv</span></a> <a class="idref" href="Imp.html#"><span class="id" type="library">Imp</span></a>.<br/>
&nbsp;&nbsp;<span class="id" type="keyword">Import</span> <span class="id" type="var">STLC</span>.<br/>

<br/>
</div>

<div class="doc">
The <span class="inlinecode"><span class="id" type="tactic">inversion</span></span> tactic of Coq is not very satisfying for
    three reasons. First, it produces a bunch of equalities 
    which one typically wants to substitute away, using <span class="inlinecode"><span class="id" type="tactic">subst</span></span>.
    Second, it introduces meaningless names for hypotheses.
    Third, a call to <span class="inlinecode"><span class="id" type="tactic">inversion</span></span> <span class="inlinecode"><span class="id" type="var">H</span></span> does not remove <span class="inlinecode"><span class="id" type="var">H</span></span> from the
    context, even though in most cases an hypothesis is no longer 
    needed after being inverted. The tactic <span class="inlinecode"><span class="id" type="var">inverts</span></span> address all 
    of these three issues. It is intented to be used in place of
    the tactic <span class="inlinecode"><span class="id" type="tactic">inversion</span></span>. 
<div class="paragraph"> </div>

 The following example illustrates how the tactic <span class="inlinecode"><span class="id" type="var">inverts</span></span> <span class="inlinecode"><span class="id" type="var">H</span></span> 
    behaves mostly like <span class="inlinecode"><span class="id" type="tactic">inversion</span></span> <span class="inlinecode"><span class="id" type="var">H</span></span> except that it performs the 
    appropriate substitutions. 
</div>
<div class="code code-tight">

<br/>
<span class="id" type="keyword">Theorem</span> <a name="InvertsExamples.skip_left"><span class="id" type="lemma">skip_left</span></a>: <span style="font-family: arial;">&forall;</span> <span class="id" type="var">c</span>,<br/>
&nbsp;&nbsp;<a class="idref" href="Equiv.html#cequiv"><span class="id" type="definition">cequiv</span></a> (<span class="id" type="var">SKIP</span>; <span class="id" type="var">c</span>) <span class="id" type="var">c</span>.<br/>
<span class="id" type="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" type="var">introv</span>. <span class="id" type="tactic">split</span>; <span class="id" type="tactic">intros</span> <span class="id" type="var">H</span>.<br/>
&nbsp;&nbsp;<span class="id" type="var">dup</span>. <span class="comment">(*&nbsp;duplicate&nbsp;the&nbsp;goal&nbsp;for&nbsp;comparison&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;was:&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id" type="tactic">inversion</span> <span class="id" type="var">H</span>. <span class="id" type="tactic">subst</span>. <span class="id" type="tactic">inversion</span> <span class="id" type="var">H2</span>. <span class="id" type="tactic">subst</span>. <span class="id" type="tactic">assumption</span>.<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;now:&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id" type="var">inverts</span> <span class="id" type="var">H</span>. <span class="id" type="var">inverts</span> <span class="id" type="var">H2</span>. <span class="id" type="tactic">assumption</span>.<br/>
<span class="id" type="var">Admitted</span>.<br/>

<br/>
</div>

<div class="doc">
A slightly more interesting example appears next. 
</div>
<div class="code code-tight">

<br/>
<span class="id" type="keyword">Theorem</span> <a name="InvertsExamples.ceval_deterministic"><span class="id" type="lemma">ceval_deterministic</span></a>: <span style="font-family: arial;">&forall;</span> <span class="id" type="var">c</span> <span class="id" type="var">st</span> <span class="id" type="var">st1</span> <span class="id" type="var">st2</span>,<br/>
&nbsp;&nbsp;<span class="id" type="var">c</span> / <span class="id" type="var">st</span> <span style="font-family: arial;">&dArr;</span> <span class="id" type="var">st1</span>  <span style="font-family: arial;">&rarr;</span><br/>
&nbsp;&nbsp;<span class="id" type="var">c</span> / <span class="id" type="var">st</span> <span style="font-family: arial;">&dArr;</span> <span class="id" type="var">st2</span> <span style="font-family: arial;">&rarr;</span><br/>
&nbsp;&nbsp;<span class="id" type="var">st1</span> = <span class="id" type="var">st2</span>.<br/>
<span class="id" type="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" type="var">introv</span> <span class="id" type="var">E1</span> <span class="id" type="var">E2</span>. <span class="id" type="tactic">generalize</span> <span class="id" type="tactic">dependent</span> <span class="id" type="var">st2</span>.<br/>
&nbsp;&nbsp;(<span class="id" type="var">ceval_cases</span> (<span class="id" type="tactic">induction</span> <span class="id" type="var">E1</span>) <span class="id" type="var">Case</span>); <span class="id" type="tactic">intros</span> <span class="id" type="var">st2</span> <span class="id" type="var">E2</span>.<br/>
&nbsp;&nbsp;<span class="id" type="var">admit</span>. <span class="id" type="var">admit</span>. <span class="comment">(*&nbsp;skip&nbsp;some&nbsp;basic&nbsp;cases&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id" type="var">dup</span>. <span class="comment">(*&nbsp;duplicate&nbsp;the&nbsp;goal&nbsp;for&nbsp;comparison&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;was:&nbsp;*)</span> <span class="id" type="tactic">inversion</span> <span class="id" type="var">E2</span>. <span class="id" type="tactic">subst</span>. <span class="id" type="var">admit</span>.<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;now:&nbsp;*)</span> <span class="id" type="var">inverts</span> <span class="id" type="var">E2</span>. <span class="id" type="var">admit</span>.<br/>
<span class="id" type="var">Admitted</span>.<br/>

<br/>
</div>

<div class="doc">
The tactic <span class="inlinecode"><span class="id" type="var">inverts</span></span> <span class="inlinecode"><span class="id" type="var">H</span></span> <span class="inlinecode"><span class="id" type="keyword">as</span>.</span> is like <span class="inlinecode"><span class="id" type="var">inverts</span></span> <span class="inlinecode"><span class="id" type="var">H</span></span> except that the 
    variables and hypotheses being produced are placed in the goal
    rather than in the context. This strategy allows naming those
    new variables and hypotheses explicitly, using either <span class="inlinecode"><span class="id" type="tactic">intros</span></span> 
    or <span class="inlinecode"><span class="id" type="var">introv</span></span>. 
</div>
<div class="code code-tight">

<br/>
<span class="id" type="keyword">Theorem</span> <a name="InvertsExamples.ceval_deterministic'"><span class="id" type="lemma">ceval_deterministic'</span></a>: <span style="font-family: arial;">&forall;</span> <span class="id" type="var">c</span> <span class="id" type="var">st</span> <span class="id" type="var">st1</span> <span class="id" type="var">st2</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="var">c</span> / <span class="id" type="var">st</span> <span style="font-family: arial;">&dArr;</span> <span class="id" type="var">st1</span>  <span style="font-family: arial;">&rarr;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="var">c</span> / <span class="id" type="var">st</span> <span style="font-family: arial;">&dArr;</span> <span class="id" type="var">st2</span> <span style="font-family: arial;">&rarr;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="var">st1</span> = <span class="id" type="var">st2</span>.<br/>
<span class="id" type="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" type="var">introv</span> <span class="id" type="var">E1</span> <span class="id" type="var">E2</span>. <span class="id" type="tactic">generalize</span> <span class="id" type="tactic">dependent</span> <span class="id" type="var">st2</span>.<br/>
&nbsp;&nbsp;(<span class="id" type="var">ceval_cases</span> (<span class="id" type="tactic">induction</span> <span class="id" type="var">E1</span>) <span class="id" type="var">Case</span>); <span class="id" type="tactic">intros</span> <span class="id" type="var">st2</span> <span class="id" type="var">E2</span>; <br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="var">inverts</span> <span class="id" type="var">E2</span> <span class="id" type="keyword">as</span>.<br/>
&nbsp;&nbsp;<span class="id" type="var">Case</span> "E_Skip". <span class="id" type="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;<span class="id" type="var">Case</span> "E_Ass".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;Observe&nbsp;that&nbsp;the&nbsp;variable&nbsp;<span class="inlinecode"><span class="id" type="var">n</span></span>&nbsp;is&nbsp;not&nbsp;automatically&nbsp;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;substituted&nbsp;because,&nbsp;contrary&nbsp;to&nbsp;<span class="inlinecode"><span class="id" type="tactic">inversion</span></span> <span class="inlinecode"><span class="id" type="var">E2</span>;</span> <span class="inlinecode"><span class="id" type="tactic">subst</span></span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;the&nbsp;tactic&nbsp;<span class="inlinecode"><span class="id" type="var">inverts</span></span> <span class="inlinecode"><span class="id" type="var">E2</span></span>&nbsp;does&nbsp;not&nbsp;substitute&nbsp;the&nbsp;equalities<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;that&nbsp;exist&nbsp;before&nbsp;running&nbsp;the&nbsp;inversion.&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;new:&nbsp;*)</span> <span class="id" type="tactic">subst</span> <span class="id" type="var">n</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;<span class="id" type="var">Case</span> "E_Seq".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;Here,&nbsp;the&nbsp;newly&nbsp;created&nbsp;variables&nbsp;can&nbsp;be&nbsp;introduced<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;using&nbsp;intros,&nbsp;so&nbsp;they&nbsp;can&nbsp;be&nbsp;assigned&nbsp;meaningful&nbsp;names,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;for&nbsp;example&nbsp;<span class="inlinecode"><span class="id" type="var">st3</span></span>&nbsp;instead&nbsp;of&nbsp;<span class="inlinecode"><span class="id" type="var">st'0</span></span>.&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;new:&nbsp;*)</span> <span class="id" type="tactic">intros</span> <span class="id" type="var">st3</span> <span class="id" type="var">Red1</span> <span class="id" type="var">Red2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">assert</span> (<span class="id" type="var">st'</span> = <span class="id" type="var">st3</span>) <span class="id" type="keyword">as</span> <span class="id" type="var">EQ1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="var">SCase</span> "Proof of assertion". <span class="id" type="tactic">apply</span> <span class="id" type="var">IHE1_1</span>; <span class="id" type="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">subst</span> <span class="id" type="var">st3</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">apply</span> <span class="id" type="var">IHE1_2</span>. <span class="id" type="tactic">assumption</span>.<br/>
&nbsp;&nbsp;<span class="id" type="var">Case</span> "E_IfTrue".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="var">SCase</span> "b1 evaluates to true".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;In&nbsp;an&nbsp;easy&nbsp;case&nbsp;like&nbsp;this&nbsp;one,&nbsp;there&nbsp;is&nbsp;no&nbsp;need&nbsp;to<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;provide&nbsp;meaningful&nbsp;names,&nbsp;so&nbsp;we&nbsp;can&nbsp;just&nbsp;use&nbsp;<span class="inlinecode"><span class="id" type="tactic">intros</span></span>&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;new:&nbsp;*)</span> <span class="id" type="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">apply</span> <span class="id" type="var">IHE1</span>. <span class="id" type="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="var">SCase</span> "b1 evaluates to false (contradiction)".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;new:&nbsp;*)</span> <span class="id" type="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <span class="id" type="var">H</span> <span class="id" type="keyword">in</span> <span class="id" type="var">H5</span>. <span class="id" type="tactic">inversion</span> <span class="id" type="var">H5</span>.<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;The&nbsp;other&nbsp;cases&nbsp;are&nbsp;similiar&nbsp;*)</span><br/>
<span class="id" type="var">Admitted</span>.<br/>

<br/>
</div>

<div class="doc">
In the particular case where a call to <span class="inlinecode"><span class="id" type="tactic">inversion</span></span> produces 
    a single subgoal, one can use the syntax <span class="inlinecode"><span class="id" type="var">inverts</span></span> <span class="inlinecode"><span class="id" type="var">H</span></span> <span class="inlinecode"><span class="id" type="keyword">as</span></span> <span class="inlinecode"><span class="id" type="var">H1</span></span> <span class="inlinecode"><span class="id" type="var">H2</span></span> <span class="inlinecode"><span class="id" type="var">H3</span></span> 
    for calling <span class="inlinecode"><span class="id" type="var">inverts</span></span> and naming the new hypotheses <span class="inlinecode"><span class="id" type="var">H1</span></span>, <span class="inlinecode"><span class="id" type="var">H2</span></span> 
    and <span class="inlinecode"><span class="id" type="var">H3</span></span>. In other words, the tactic <span class="inlinecode"><span class="id" type="var">inverts</span></span> <span class="inlinecode"><span class="id" type="var">H</span></span> <span class="inlinecode"><span class="id" type="keyword">as</span></span> <span class="inlinecode"><span class="id" type="var">H1</span></span> <span class="inlinecode"><span class="id" type="var">H2</span></span> <span class="inlinecode"><span class="id" type="var">H3</span></span> is
    equivalent to <span class="inlinecode"><span class="id" type="var">invert</span></span> <span class="inlinecode"><span class="id" type="var">H</span>;</span> <span class="inlinecode"><span class="id" type="var">introv</span></span> <span class="inlinecode"><span class="id" type="var">H1</span></span> <span class="inlinecode"><span class="id" type="var">H2</span></span> <span class="inlinecode"><span class="id" type="var">H3</span></span>. An example follows. 
</div>
<div class="code code-tight">

<br/>
<span class="id" type="keyword">Theorem</span> <a name="InvertsExamples.skip_left'"><span class="id" type="lemma">skip_left'</span></a>: <span style="font-family: arial;">&forall;</span> <span class="id" type="var">c</span>,<br/>
&nbsp;&nbsp;<a class="idref" href="Equiv.html#cequiv"><span class="id" type="definition">cequiv</span></a> (<span class="id" type="var">SKIP</span>; <span class="id" type="var">c</span>) <span class="id" type="var">c</span>.<br/>
<span class="id" type="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" type="var">introv</span>. <span class="id" type="tactic">split</span>; <span class="id" type="tactic">intros</span> <span class="id" type="var">H</span>.<br/>
&nbsp;&nbsp;<span class="id" type="var">inverts</span> <span class="id" type="var">H</span> <span class="id" type="keyword">as</span> <span class="id" type="var">U</span> <span class="id" type="var">V</span>. <span class="comment">(*&nbsp;new&nbsp;hypotheses&nbsp;are&nbsp;named&nbsp;<span class="inlinecode"><span class="id" type="var">U</span></span>&nbsp;and&nbsp;<span class="inlinecode"><span class="id" type="var">V</span></span>&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id" type="var">inverts</span> <span class="id" type="var">U</span>. <span class="id" type="tactic">assumption</span>.<br/>
<span class="id" type="var">Admitted</span>.<br/>

<br/>
</div>

<div class="doc">
A more involved example follows. In particular, it shows that
    the name of an inverted hypothesis can be reused. 
</div>
<div class="code code-tight">

<br/>
<span class="id" type="keyword">Example</span> <a name="InvertsExamples.typing_nonexample_1"><span class="id" type="definition">typing_nonexample_1</span></a> :<br/>
&nbsp;&nbsp;~ <span style="font-family: arial;">&exist;</span> <span class="id" type="var">T</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Stlc.html#STLC.has_type"><span class="id" type="inductive">has_type</span></a> <a class="idref" href="SfLib.html#empty"><span class="id" type="definition">empty</span></a> <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="Stlc.html#STLC.tm_abs"><span class="id" type="constructor">tm_abs</span></a> <a class="idref" href="Stlc.html#STLC.a"><span class="id" type="abbreviation">a</span></a> <a class="idref" href="Stlc.html#STLC.ty_Bool"><span class="id" type="constructor">ty_Bool</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="Stlc.html#STLC.tm_abs"><span class="id" type="constructor">tm_abs</span></a> <a class="idref" href="Stlc.html#STLC.b"><span class="id" type="abbreviation">b</span></a> <a class="idref" href="Stlc.html#STLC.ty_Bool"><span class="id" type="constructor">ty_Bool</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="Stlc.html#STLC.tm_app"><span class="id" type="constructor">tm_app</span></a> (<a class="idref" href="Stlc.html#STLC.tm_var"><span class="id" type="constructor">tm_var</span></a> <a class="idref" href="Stlc.html#STLC.a"><span class="id" type="abbreviation">a</span></a>) (<a class="idref" href="Stlc.html#STLC.tm_var"><span class="id" type="constructor">tm_var</span></a> <a class="idref" href="Stlc.html#STLC.b"><span class="id" type="abbreviation">b</span></a>))))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="var">T</span>.<br/>
<span class="id" type="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" type="var">dup</span> 3.<br/>

<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;The&nbsp;old&nbsp;proof:&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id" type="tactic">intros</span> <span class="id" type="var">C</span>. <span class="id" type="tactic">destruct</span> <span class="id" type="var">C</span>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">inversion</span> <span class="id" type="var">H</span>. <span class="id" type="tactic">subst</span>. <span class="id" type="tactic">clear</span> <span class="id" type="var">H</span>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">inversion</span> <span class="id" type="var">H5</span>. <span class="id" type="tactic">subst</span>. <span class="id" type="tactic">clear</span> <span class="id" type="var">H5</span>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">inversion</span> <span class="id" type="var">H4</span>. <span class="id" type="tactic">subst</span>. <span class="id" type="tactic">clear</span> <span class="id" type="var">H4</span>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">inversion</span> <span class="id" type="var">H2</span>. <span class="id" type="tactic">subst</span>. <span class="id" type="tactic">clear</span> <span class="id" type="var">H2</span>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">inversion</span> <span class="id" type="var">H5</span>. <span class="id" type="tactic">subst</span>. <span class="id" type="tactic">clear</span> <span class="id" type="var">H5</span>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">inversion</span> <span class="id" type="var">H1</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;The&nbsp;new&nbsp;proof:&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id" type="tactic">intros</span> <span class="id" type="var">C</span>. <span class="id" type="tactic">destruct</span> <span class="id" type="var">C</span>.<br/>
&nbsp;&nbsp;<span class="id" type="var">inverts</span> <span class="id" type="var">H</span> <span class="id" type="keyword">as</span> <span class="id" type="var">H1</span>.<br/>
&nbsp;&nbsp;<span class="id" type="var">inverts</span> <span class="id" type="var">H1</span> <span class="id" type="keyword">as</span> <span class="id" type="var">H2</span>.<br/>
&nbsp;&nbsp;<span class="id" type="var">inverts</span> <span class="id" type="var">H2</span> <span class="id" type="keyword">as</span> <span class="id" type="var">H3</span>.<br/>
&nbsp;&nbsp;<span class="id" type="var">inverts</span> <span class="id" type="var">H3</span> <span class="id" type="keyword">as</span> <span class="id" type="var">H4</span>.<br/>
&nbsp;&nbsp;<span class="id" type="var">inverts</span> <span class="id" type="var">H4</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;The&nbsp;new&nbsp;proof,&nbsp;alternative:&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id" type="tactic">intros</span> <span class="id" type="var">C</span>. <span class="id" type="tactic">destruct</span> <span class="id" type="var">C</span>.<br/>
&nbsp;&nbsp;<span class="id" type="var">inverts</span> <span class="id" type="var">H</span> <span class="id" type="keyword">as</span> <span class="id" type="var">H</span>.<br/>
&nbsp;&nbsp;<span class="id" type="var">inverts</span> <span class="id" type="var">H</span> <span class="id" type="keyword">as</span> <span class="id" type="var">H</span>.<br/>
&nbsp;&nbsp;<span class="id" type="var">inverts</span> <span class="id" type="var">H</span> <span class="id" type="keyword">as</span> <span class="id" type="var">H</span>.<br/>
&nbsp;&nbsp;<span class="id" type="var">inverts</span> <span class="id" type="var">H</span> <span class="id" type="keyword">as</span> <span class="id" type="var">H</span>.<br/>
&nbsp;&nbsp;<span class="id" type="var">inverts</span> <span class="id" type="var">H</span>.<br/>
<span class="id" type="keyword">Qed</span>.<br/>

<br/>
<span class="id" type="keyword">End</span> <a class="idref" href="UseTactics.html#"><span class="id" type="module">InvertsExamples</span></a>.<br/>

<br/>
</div>

<div class="doc">
Note: in the rare cases where one need to perform an inversion
    on an hypothesis <span class="inlinecode"><span class="id" type="var">H</span></span> without clearing <span class="inlinecode"><span class="id" type="var">H</span></span> from the context,
    one can use the tactic <span class="inlinecode"><span class="id" type="var">inverts</span></span> <span class="inlinecode"><span class="id" type="var">keep</span></span> <span class="inlinecode"><span class="id" type="var">H</span></span>, where the keyword <span class="inlinecode"><span class="id" type="var">keep</span></span>
    indicates that the hypothesis should be kept in the context. 
<div class="paragraph"> </div>

<a name="lab749"></a><h2 class="section">The tactics <span class="inlinecode"><span class="id" type="var">cases</span></span> and <span class="inlinecode"><span class="id" type="var">cases_if</span></span></h2>

</div>
<div class="code code-space">

<br/>
<span class="id" type="keyword">Module</span> <a name="CasesExample"><span class="id" type="module">CasesExample</span></a>.<br/>
&nbsp;&nbsp;<span class="id" type="keyword">Require</span> <span class="id" type="keyword">Import</span> <a class="idref" href="Stlc.html#"><span class="id" type="library">Stlc</span></a>.<br/>
&nbsp;&nbsp;<span class="id" type="keyword">Import</span> <span class="id" type="var">STLC</span>.<br/>

<br/>
</div>

<div class="doc">
The tactic <span class="inlinecode"><span class="id" type="var">cases</span></span> <span class="inlinecode"><span class="id" type="var">E</span></span> is a shorthand for <span class="inlinecode"><span class="id" type="var">remember</span></span> <span class="inlinecode"><span class="id" type="var">E</span></span> <span class="inlinecode"><span class="id" type="keyword">as</span></span> <span class="inlinecode"><span class="id" type="var">x</span>;</span> <span class="inlinecode"><span class="id" type="tactic">destruct</span></span> <span class="inlinecode"><span class="id" type="var">x</span></span>,
    with the difference that it generates the symmetric of the
    equality produced by <span class="inlinecode"><span class="id" type="var">remember</span></span>. For example, <span class="inlinecode"><span class="id" type="var">cases</span></span> would
    produce the equality <span class="inlinecode"><span class="id" type="var">beq_id</span></span> <span class="inlinecode"><span class="id" type="var">k1</span></span> <span class="inlinecode"><span class="id" type="var">k2</span></span> <span class="inlinecode">=</span> <span class="inlinecode"><span class="id" type="var">true</span></span> rather than the
    equality <span class="inlinecode"><span class="id" type="var">true</span></span> <span class="inlinecode">=</span> <span class="inlinecode"><span class="id" type="var">beq_id</span></span> <span class="inlinecode"><span class="id" type="var">k1</span></span> <span class="inlinecode"><span class="id" type="var">k2</span></span>, the latter being fairly awkward 
    to read. The tactics <span class="inlinecode"><span class="id" type="var">cases</span></span> <span class="inlinecode"><span class="id" type="var">E</span></span> <span class="inlinecode"><span class="id" type="keyword">as</span></span> <span class="inlinecode"><span class="id" type="var">H</span></span> allows specifying the name 
    to be used for the generated equality.

<div class="paragraph"> </div>

    Remark: <span class="inlinecode"><span class="id" type="var">cases</span></span> is quite similar to <span class="inlinecode"><span class="id" type="var">case_eq</span></span>. For the sake of 
    compatibility with <span class="inlinecode"><span class="id" type="var">remember</span></span> and <span class="inlinecode"><span class="id" type="var">case_eq</span></span>, the library 
    "LibTactics" provides a tactic called <span class="inlinecode"><span class="id" type="var">cases'</span></span> that generates exactly 
    the same equalities as <span class="inlinecode"><span class="id" type="var">remember</span></span> or <span class="inlinecode"><span class="id" type="var">case_eq</span></span> would, i.e., producing 
    an equality in the form <span class="inlinecode"><span class="id" type="var">true</span></span> <span class="inlinecode">=</span> <span class="inlinecode"><span class="id" type="var">beq_id</span></span> <span class="inlinecode"><span class="id" type="var">k1</span></span> <span class="inlinecode"><span class="id" type="var">k2</span></span> rather than 
    <span class="inlinecode"><span class="id" type="var">beq_id</span></span> <span class="inlinecode"><span class="id" type="var">k1</span></span> <span class="inlinecode"><span class="id" type="var">k2</span></span> <span class="inlinecode">=</span> <span class="inlinecode"><span class="id" type="var">true</span></span>. The following examples illustrate the 
    behavior of the tactic <span class="inlinecode"><span class="id" type="var">cases'</span></span> <span class="inlinecode"><span class="id" type="var">E</span></span> <span class="inlinecode"><span class="id" type="keyword">as</span></span> <span class="inlinecode"><span class="id" type="var">H</span></span>. 
</div>
<div class="code code-tight">

<br/>
<span class="id" type="keyword">Theorem</span> <a name="CasesExample.update_same"><span class="id" type="lemma">update_same</span></a> : <span style="font-family: arial;">&forall;</span> <span class="id" type="var">x1</span> <span class="id" type="var">k1</span> <span class="id" type="var">k2</span> (<span class="id" type="var">f</span> : <a class="idref" href="Imp.html#state"><span class="id" type="definition">state</span></a>),<br/>
&nbsp;&nbsp;<span class="id" type="var">f</span> <span class="id" type="var">k1</span> = <span class="id" type="var">x1</span> <span style="font-family: arial;">&rarr;</span><br/>
&nbsp;&nbsp;(<a class="idref" href="Imp.html#update"><span class="id" type="definition">update</span></a> <span class="id" type="var">f</span> <span class="id" type="var">k1</span> <span class="id" type="var">x1</span>) <span class="id" type="var">k2</span> = <span class="id" type="var">f</span> <span class="id" type="var">k2</span>.<br/>
<span class="id" type="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">intros</span> <span class="id" type="var">x1</span> <span class="id" type="var">k1</span> <span class="id" type="var">k2</span> <span class="id" type="var">f</span> <span class="id" type="var">Heq</span>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">unfold</span> <span class="id" type="var">update</span>. <span class="id" type="tactic">subst</span>.<br/>
&nbsp;&nbsp;<span class="id" type="var">dup</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;The&nbsp;old&nbsp;proof:&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id" type="var">remember</span> (<a class="idref" href="SfLib.html#beq_id"><span class="id" type="definition">beq_id</span></a> <span class="id" type="var">k1</span> <span class="id" type="var">k2</span>) <span class="id" type="keyword">as</span> <span class="id" type="var">b</span>. <span class="id" type="tactic">destruct</span> <span class="id" type="var">b</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">apply</span> <a class="idref" href="SfLib.html#beq_id_eq"><span class="id" type="lemma">beq_id_eq</span></a> <span class="id" type="keyword">in</span> <span class="id" type="var">Heqb</span>. <span class="id" type="tactic">subst</span>. <span class="id" type="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">reflexivity</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;The&nbsp;new&nbsp;proof:&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id" type="var">cases'</span> (<a class="idref" href="SfLib.html#beq_id"><span class="id" type="definition">beq_id</span></a> <span class="id" type="var">k1</span> <span class="id" type="var">k2</span>) <span class="id" type="keyword">as</span> <span class="id" type="var">E</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">apply</span> <a class="idref" href="SfLib.html#beq_id_eq"><span class="id" type="lemma">beq_id_eq</span></a> <span class="id" type="keyword">in</span> <span class="id" type="var">E</span>. <span class="id" type="tactic">subst</span>. <span class="id" type="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">reflexivity</span>.<br/>
<span class="id" type="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
The tactic <span class="inlinecode"><span class="id" type="var">cases_if</span></span> calls <span class="inlinecode"><span class="id" type="var">cases</span></span> <span class="inlinecode"><span class="id" type="var">E</span></span> on the first expression <span class="inlinecode"><span class="id" type="var">E</span></span>
    that appears in the goal or in the context as argument of a <span class="inlinecode"><span class="id" type="keyword">if</span></span>.
    So, the tactic <span class="inlinecode"><span class="id" type="var">cases_if</span></span> saves the need to copy-past an expression
    that already occurs in the goal.
    Here again, for compatibility reasons, the library provides a tactic
    called <span class="inlinecode"><span class="id" type="var">cases_if'</span></span>, and the syntax <span class="inlinecode"><span class="id" type="var">cases_if'</span></span> <span class="inlinecode"><span class="id" type="keyword">as</span></span> <span class="inlinecode"><span class="id" type="var">H</span></span> allows specifying 
    the name of the generated equalities. 
</div>
<div class="code code-tight">

<br/>
<span class="id" type="keyword">Theorem</span> <a name="CasesExample.update_same'"><span class="id" type="lemma">update_same'</span></a> : <span style="font-family: arial;">&forall;</span> <span class="id" type="var">x1</span> <span class="id" type="var">k1</span> <span class="id" type="var">k2</span> (<span class="id" type="var">f</span> : <a class="idref" href="Imp.html#state"><span class="id" type="definition">state</span></a>),<br/>
&nbsp;&nbsp;<span class="id" type="var">f</span> <span class="id" type="var">k1</span> = <span class="id" type="var">x1</span> <span style="font-family: arial;">&rarr;</span><br/>
&nbsp;&nbsp;(<a class="idref" href="Imp.html#update"><span class="id" type="definition">update</span></a> <span class="id" type="var">f</span> <span class="id" type="var">k1</span> <span class="id" type="var">x1</span>) <span class="id" type="var">k2</span> = <span class="id" type="var">f</span> <span class="id" type="var">k2</span>.<br/>
<span class="id" type="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">intros</span> <span class="id" type="var">x1</span> <span class="id" type="var">k1</span> <span class="id" type="var">k2</span> <span class="id" type="var">f</span> <span class="id" type="var">Heq</span>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">unfold</span> <span class="id" type="var">update</span>. <span class="id" type="tactic">subst</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;The&nbsp;new&nbsp;proof:&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id" type="var">cases_if'</span> <span class="id" type="keyword">as</span> <span class="id" type="var">E</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">apply</span> <a class="idref" href="SfLib.html#beq_id_eq"><span class="id" type="lemma">beq_id_eq</span></a> <span class="id" type="keyword">in</span> <span class="id" type="var">E</span>. <span class="id" type="tactic">subst</span>. <span class="id" type="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">reflexivity</span>.<br/>
<span class="id" type="keyword">Qed</span>.<br/>

<br/>
<span class="id" type="keyword">End</span> <a class="idref" href="UseTactics.html#"><span class="id" type="module">CasesExample</span></a>.<br/>

<br/>
</div>

<div class="doc">
<a name="lab750"></a><h1 class="section">Tactics for n-ary connectives</h1>

<div class="paragraph"> </div>

 Because Coq encodes conjunctions and disjunctions using binary 
    constructors <span class="inlinecode"><span style="font-family: arial;">&and;</span></span> and <span class="inlinecode"><span style="font-family: arial;">&or;</span></span>, working with a conjunction or a
    disjunction of <span class="inlinecode"><span class="id" type="var">N</span></span> facts can turn out to be quite cumbursome.
    For this reason, "LibTactics" provides tactics offering direct
    support for n-ary conjunctions and disjunctions. It also provides
    direct support for n-ary existententials. 
<div class="paragraph"> </div>

 This section presents the following tactics:

<div class="paragraph"> </div>

<ul class="doclist">
<li> <span class="inlinecode"><span class="id" type="var">splits</span></span> for decomposing n-ary conjunctions,

</li>
<li> <span class="inlinecode"><span class="id" type="var">branch</span></span> for decomposing n-ary disjunctions,

</li>
<li> <span class="inlinecode"><span style="font-family: arial;">&exist;</span></span> for proving n-ary existentials. 
</li>
</ul>

</div>
<div class="code code-tight">

<br/>
<span class="id" type="keyword">Module</span> <a name="NaryExamples"><span class="id" type="module">NaryExamples</span></a>.<br/>
&nbsp;&nbsp;<span class="id" type="keyword">Require</span> <span class="id" type="keyword">Import</span> <a class="idref" href="References.html#"><span class="id" type="library">References</span></a> <a class="idref" href="SfLib.html#"><span class="id" type="library">SfLib</span></a>.<br/>
&nbsp;&nbsp;<span class="id" type="keyword">Import</span> <span class="id" type="var">STLCRef</span>.<br/>

<br/>
</div>

<div class="doc">
<a name="lab751"></a><h2 class="section">The tactic <span class="inlinecode"><span class="id" type="var">splits</span></span></h2>

<div class="paragraph"> </div>

 The tactic <span class="inlinecode"><span class="id" type="var">splits</span></span> applies to a goal made of a conjunction 
    of <span class="inlinecode"><span class="id" type="var">n</span></span> propositions and it produces <span class="inlinecode"><span class="id" type="var">n</span></span> subgoals. For example,
    it decomposes the goal <span class="inlinecode"><span class="id" type="var">G1</span></span> <span class="inlinecode"><span style="font-family: arial;">&and;</span></span> <span class="inlinecode"><span class="id" type="var">G2</span></span> <span class="inlinecode"><span style="font-family: arial;">&and;</span></span> <span class="inlinecode"><span class="id" type="var">G3</span></span> into the three subgoals
    <span class="inlinecode"><span class="id" type="var">G1</span></span>, <span class="inlinecode"><span class="id" type="var">G2</span></span> and <span class="inlinecode"><span class="id" type="var">G3</span></span>. 
</div>
<div class="code code-tight">

<br/>
<span class="id" type="keyword">Lemma</span> <a name="NaryExamples.demo_splits"><span class="id" type="lemma">demo_splits</span></a> : <span style="font-family: arial;">&forall;</span> <span class="id" type="var">n</span> <span class="id" type="var">m</span>,<br/>
&nbsp;&nbsp;<span class="id" type="var">n</span> &gt; 0 <span style="font-family: arial;">&and;</span> <span class="id" type="var">n</span> &lt; <span class="id" type="var">m</span> <span style="font-family: arial;">&and;</span> <span class="id" type="var">m</span> &lt; <span class="id" type="var">n</span>+10 <span style="font-family: arial;">&and;</span> <span class="id" type="var">m</span> &lt;&gt; 3.<br/>
<span class="id" type="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">intros</span>. <span class="id" type="var">splits</span>.<br/>
<span class="id" type="var">Admitted</span>.<br/>

<br/>
</div>

<div class="doc">
<a name="lab752"></a><h2 class="section">The tactic <span class="inlinecode"><span class="id" type="var">branch</span></span></h2>

<div class="paragraph"> </div>

 The tactic <span class="inlinecode"><span class="id" type="var">branch</span></span> <span class="inlinecode"><span class="id" type="var">k</span></span> can be used to proved a n-ary disjunction.
    For example, if the goal takes the form <span class="inlinecode"><span class="id" type="var">G1</span></span> <span class="inlinecode"><span style="font-family: arial;">&or;</span></span> <span class="inlinecode"><span class="id" type="var">G2</span></span> <span class="inlinecode"><span style="font-family: arial;">&or;</span></span> <span class="inlinecode"><span class="id" type="var">G3</span></span>,
    the tactic <span class="inlinecode"><span class="id" type="var">branch</span></span> <span class="inlinecode">2</span> leaves only <span class="inlinecode"><span class="id" type="var">G2</span></span> as subgoal. The following
    example illustrates the behavior of the <span class="inlinecode"><span class="id" type="var">branch</span></span> tactic. 
</div>
<div class="code code-tight">

<br/>
<span class="id" type="keyword">Lemma</span> <a name="NaryExamples.demo_branch"><span class="id" type="lemma">demo_branch</span></a> : <span style="font-family: arial;">&forall;</span> <span class="id" type="var">n</span> <span class="id" type="var">m</span>,<br/>
&nbsp;&nbsp;<span class="id" type="var">n</span> &lt; <span class="id" type="var">m</span> <span style="font-family: arial;">&or;</span> <span class="id" type="var">n</span> = <span class="id" type="var">m</span> <span style="font-family: arial;">&or;</span> <span class="id" type="var">m</span> &lt; <span class="id" type="var">n</span>.<br/>
<span class="id" type="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">destruct</span> (<span class="id" type="definition">lt_eq_lt_dec</span> <span class="id" type="var">n</span> <span class="id" type="var">m</span>) <span class="id" type="keyword">as</span> [[<span class="id" type="var">H1</span>|<span class="id" type="var">H2</span>]|<span class="id" type="var">H3</span>].<br/>
&nbsp;&nbsp;<span class="id" type="var">branch</span> 1. <span class="id" type="tactic">apply</span> <span class="id" type="var">H1</span>.<br/>
&nbsp;&nbsp;<span class="id" type="var">branch</span> 2. <span class="id" type="tactic">apply</span> <span class="id" type="var">H2</span>.<br/>
&nbsp;&nbsp;<span class="id" type="var">branch</span> 3. <span class="id" type="tactic">apply</span> <span class="id" type="var">H3</span>.<br/>
<span class="id" type="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
<a name="lab753"></a><h2 class="section">The tactic <span class="inlinecode"><span style="font-family: arial;">&exist;</span></span></h2>

<div class="paragraph"> </div>

 The library "LibTactics" introduces a notation for n-ary
    existentials. For example, one can write <span class="inlinecode"><span style="font-family: arial;">&exist;</span></span> <span class="inlinecode"><span class="id" type="var">x</span></span> <span class="inlinecode"><span class="id" type="var">y</span></span> <span class="inlinecode"><span class="id" type="var">z</span>,</span> <span class="inlinecode"><span class="id" type="var">H</span></span>
    instead of <span class="inlinecode"><span style="font-family: arial;">&exist;</span></span> <span class="inlinecode"><span class="id" type="var">x</span>,</span> <span class="inlinecode"><span style="font-family: arial;">&exist;</span></span> <span class="inlinecode"><span class="id" type="var">y</span>,</span> <span class="inlinecode"><span style="font-family: arial;">&exist;</span></span> <span class="inlinecode"><span class="id" type="var">z</span>,</span> <span class="inlinecode"><span class="id" type="var">H</span></span>. Similarly,
    the library provides a n-ary tactic <span class="inlinecode"><span style="font-family: arial;">&exist;</span></span> <span class="inlinecode"><span class="id" type="var">a</span></span> <span class="inlinecode"><span class="id" type="var">b</span></span> <span class="inlinecode"><span class="id" type="var">c</span></span>, which is a
    shorthand for <span class="inlinecode"><span style="font-family: arial;">&exist;</span></span> <span class="inlinecode"><span class="id" type="var">a</span>;</span> <span class="inlinecode"><span style="font-family: arial;">&exist;</span></span> <span class="inlinecode"><span class="id" type="var">b</span>;</span> <span class="inlinecode"><span style="font-family: arial;">&exist;</span></span> <span class="inlinecode"><span class="id" type="var">c</span></span>. The following
    example illustrates both the notation and the tactic for
    dealing with n-ary existentials. 
</div>
<div class="code code-tight">

<br/>
<span class="id" type="keyword">Theorem</span> <a name="NaryExamples.progress"><span class="id" type="lemma">progress</span></a> : <span style="font-family: arial;">&forall;</span> <span class="id" type="var">ST</span> <span class="id" type="var">t</span> <span class="id" type="var">T</span> <span class="id" type="var">st</span>,<br/>
&nbsp;&nbsp;<a class="idref" href="References.html#STLCRef.has_type"><span class="id" type="inductive">has_type</span></a> <a class="idref" href="SfLib.html#empty"><span class="id" type="definition">empty</span></a> <span class="id" type="var">ST</span> <span class="id" type="var">t</span> <span class="id" type="var">T</span> <span style="font-family: arial;">&rarr;</span><br/>
&nbsp;&nbsp;<a class="idref" href="References.html#STLCRef.store_well_typed"><span class="id" type="definition">store_well_typed</span></a> <span class="id" type="var">ST</span> <span class="id" type="var">st</span> <span style="font-family: arial;">&rarr;</span><br/>
&nbsp;&nbsp;<a class="idref" href="References.html#STLCRef.value"><span class="id" type="inductive">value</span></a> <span class="id" type="var">t</span> <span style="font-family: arial;">&or;</span> <span style="font-family: arial;">&exist;</span> <span class="id" type="var">t'</span> <span class="id" type="var">st'</span>, <span class="id" type="var">t</span> / <span class="id" type="var">st</span> <span style="font-family: arial;">&rArr;</span> <span class="id" type="var">t'</span> / <span class="id" type="var">st'</span>.<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;was:&nbsp;<span class="inlinecode"><span class="id" type="var">value</span></span> <span class="inlinecode"><span class="id" type="var">t</span></span> <span class="inlinecode"><span style="font-family: arial;">&or;</span></span> <span class="inlinecode"><span style="font-family: arial;">&exist;</span></span> <span class="inlinecode"><span class="id" type="var">t'</span>,</span> <span class="inlinecode"><span style="font-family: arial;">&exist;</span></span> <span class="inlinecode"><span class="id" type="var">st'</span>,</span> <span class="inlinecode"><span class="id" type="var">t</span></span> <span class="inlinecode">/</span> <span class="inlinecode"><span class="id" type="var">st</span></span> <span class="inlinecode"><span style="font-family: arial;">&rArr;</span></span> <span class="inlinecode"><span class="id" type="var">t'</span></span> <span class="inlinecode">/</span> <span class="inlinecode"><span class="id" type="var">st'</span></span>&nbsp;*)</span><br/>
<span class="id" type="keyword">Proof</span> <span class="id" type="keyword">with</span> <span class="id" type="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">intros</span> <span class="id" type="var">ST</span> <span class="id" type="var">t</span> <span class="id" type="var">T</span> <span class="id" type="var">st</span> <span class="id" type="var">Ht</span> <span class="id" type="var">HST</span>. <span class="id" type="var">remember</span> (@<a class="idref" href="SfLib.html#empty"><span class="id" type="definition">empty</span></a> <a class="idref" href="References.html#STLCRef.ty"><span class="id" type="inductive">ty</span></a>) <span class="id" type="keyword">as</span> <span style="font-family: serif; font-size:85%;">&Gamma;</span>.<br/>
&nbsp;&nbsp;(<span class="id" type="var">has_type_cases</span> (<span class="id" type="tactic">induction</span> <span class="id" type="var">Ht</span>) <span class="id" type="var">Case</span>); <span class="id" type="tactic">subst</span>; <span class="id" type="tactic">try</span> <span class="id" type="var">solve</span> <span class="id" type="tactic">by</span> <span class="id" type="tactic">inversion</span>...<br/>
&nbsp;&nbsp;<span class="id" type="var">Case</span> "T_App".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="var">right</span>. <span class="id" type="tactic">destruct</span> <span class="id" type="var">IHHt1</span> <span class="id" type="keyword">as</span> [<span class="id" type="var">Ht1p</span> | <span class="id" type="var">Ht1p</span>]...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="var">SCase</span> "t1 is a value".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">inversion</span> <span class="id" type="var">Ht1p</span>; <span class="id" type="tactic">subst</span>; <span class="id" type="tactic">try</span> <span class="id" type="var">solve</span> <span class="id" type="tactic">by</span> <span class="id" type="tactic">inversion</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">destruct</span> <span class="id" type="var">IHHt2</span> <span class="id" type="keyword">as</span> [<span class="id" type="var">Ht2p</span> | <span class="id" type="var">Ht2p</span>]...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="var">SSCase</span> "t2 steps".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">inversion</span> <span class="id" type="var">Ht2p</span> <span class="id" type="keyword">as</span> [<span class="id" type="var">t2'</span> [<span class="id" type="var">st'</span> <span class="id" type="var">Hstep</span>]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="font-family: arial;">&exist;</span> (<a class="idref" href="References.html#STLCRef.tm_app"><span class="id" type="constructor">tm_app</span></a> (<a class="idref" href="References.html#STLCRef.tm_abs"><span class="id" type="constructor">tm_abs</span></a> <span class="id" type="var">x</span> <span class="id" type="var">T</span> <span class="id" type="var">t</span>) <span class="id" type="var">t2'</span>) <span class="id" type="var">st'</span>...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;was:&nbsp;<span class="inlinecode"><span style="font-family: arial;">&exist;</span></span> <span class="inlinecode">(<span class="id" type="var">tm_app</span></span> <span class="inlinecode">(<span class="id" type="var">tm_abs</span></span> <span class="inlinecode"><span class="id" type="var">x</span></span> <span class="inlinecode"><span class="id" type="var">T</span></span> <span class="inlinecode"><span class="id" type="var">t</span>)</span> <span class="inlinecode"><span class="id" type="var">t2'</span>).</span> <span class="inlinecode"><span style="font-family: arial;">&exist;</span></span> <span class="inlinecode"><span class="id" type="var">st'</span>...</span>&nbsp;*)</span><br/>
<span class="id" type="var">Admitted</span>.<br/>

<br/>
</div>

<div class="doc">
Remark: a similar facility for n-ary existentials is provided
    by the module <span class="inlinecode"><span class="id" type="var">Coq.Program.Syntax</span></span> from the standard library,
    except that this facility only works up to arity 4, whereas 
    <span class="inlinecode"><span class="id" type="var">LibTactics</span></span> supports arities up to 10. 
</div>
<div class="code code-tight">

<br/>
<span class="id" type="keyword">End</span> <a class="idref" href="UseTactics.html#"><span class="id" type="module">NaryExamples</span></a>.<br/>

<br/>
</div>

<div class="doc">
<a name="lab754"></a><h1 class="section">Tactics for working with equality</h1>

<div class="paragraph"> </div>

 One of the major weakness of Coq compared with other interactive
    proof assistants is its relatively poor support for reasoning
    with equalities. The tactics described next aims at simplifying
    pieces of proof scripts manipulating equalities. 
<div class="paragraph"> </div>

 This section presents the following tactics:

<div class="paragraph"> </div>

<ul class="doclist">
<li> <span class="inlinecode"><span class="id" type="var">asserts_rewrite</span></span> for introducing an equality to rewrite with,

</li>
<li> <span class="inlinecode"><span class="id" type="var">cuts_rewrite</span></span>, which is similar except subgoals are swapped,

</li>
<li> <span class="inlinecode"><span class="id" type="var">substs</span></span> for improving the <span class="inlinecode"><span class="id" type="tactic">subst</span></span> tactic,

</li>
<li> <span class="inlinecode"><span class="id" type="var">fequals</span></span> for improving the <span class="inlinecode"><span class="id" type="tactic">f_equal</span></span> tactic,

</li>
<li> <span class="inlinecode"><span class="id" type="var">applys_eq</span></span> for proving <span class="inlinecode"><span class="id" type="var">P</span></span> <span class="inlinecode"><span class="id" type="var">x</span></span> <span class="inlinecode"><span class="id" type="var">y</span></span> using an hypothesis <span class="inlinecode"><span class="id" type="var">P</span></span> <span class="inlinecode"><span class="id" type="var">x</span></span> <span class="inlinecode"><span class="id" type="var">z</span></span>,
      automatically generating the equality <span class="inlinecode"><span class="id" type="var">y</span></span> <span class="inlinecode">=</span> <span class="inlinecode"><span class="id" type="var">z</span></span>. 
</li>
</ul>

</div>
<div class="code code-tight">

<br/>
<span class="id" type="keyword">Module</span> <a name="EqualityExamples"><span class="id" type="module">EqualityExamples</span></a>.<br/>

<br/>
</div>

<div class="doc">
<a name="lab755"></a><h2 class="section">The tactics <span class="inlinecode"><span class="id" type="var">asserts_rewrite</span></span> and <span class="inlinecode"><span class="id" type="var">cuts_rewrite</span></span></h2>

<div class="paragraph"> </div>

 The tactic <span class="inlinecode"><span class="id" type="var">asserts_rewrite</span></span> <span class="inlinecode">(<span class="id" type="var">E1</span></span> <span class="inlinecode">=</span> <span class="inlinecode"><span class="id" type="var">E2</span>)</span> replaces <span class="inlinecode"><span class="id" type="var">E1</span></span> with <span class="inlinecode"><span class="id" type="var">E2</span></span> in
    the goal, and produces the goal <span class="inlinecode"><span class="id" type="var">E1</span></span> <span class="inlinecode">=</span> <span class="inlinecode"><span class="id" type="var">E2</span></span>. 
</div>
<div class="code code-tight">

<br/>
<span class="id" type="keyword">Theorem</span> <a name="EqualityExamples.mult_0_plus"><span class="id" type="lemma">mult_0_plus</span></a> : <span style="font-family: arial;">&forall;</span> <span class="id" type="var">n</span> <span class="id" type="var">m</span> : <span class="id" type="inductive">nat</span>,<br/>
&nbsp;&nbsp;(0 + <span class="id" type="var">n</span>) * <span class="id" type="var">m</span> = <span class="id" type="var">n</span> * <span class="id" type="var">m</span>.<br/>
<span class="id" type="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" type="var">dup</span>.<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;The&nbsp;old&nbsp;proof:&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id" type="tactic">intros</span> <span class="id" type="var">n</span> <span class="id" type="var">m</span>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">assert</span> (<span class="id" type="var">H</span>: 0 + <span class="id" type="var">n</span> = <span class="id" type="var">n</span>). <span class="id" type="tactic">reflexivity</span>. <span class="id" type="tactic">rewrite</span> <span style="font-family: arial;">&rarr;</span> <span class="id" type="var">H</span>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">reflexivity</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;The&nbsp;new&nbsp;proof:&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id" type="tactic">intros</span> <span class="id" type="var">n</span> <span class="id" type="var">m</span>.<br/>
&nbsp;&nbsp;<span class="id" type="var">asserts_rewrite</span> (0 + <span class="id" type="var">n</span> = <span class="id" type="var">n</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">reflexivity</span>. <span class="comment">(*&nbsp;subgoal&nbsp;<span class="inlinecode">0+<span class="id" type="var">n</span></span> <span class="inlinecode">=</span> <span class="inlinecode"><span class="id" type="var">n</span></span>&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">reflexivity</span>. <span class="comment">(*&nbsp;subgoal&nbsp;<span class="inlinecode"><span class="id" type="var">n</span>*<span class="id" type="var">m</span></span> <span class="inlinecode">=</span> <span class="inlinecode"><span class="id" type="var">m</span>*<span class="id" type="var">n</span></span>&nbsp;*)</span><br/>
<span class="id" type="keyword">Qed</span>.<br/>

<br/>
<span class="comment">(***&nbsp;Remark:&nbsp;the&nbsp;syntax&nbsp;<span class="inlinecode"><span class="id" type="var">asserts_rewrite</span></span> <span class="inlinecode">(<span class="id" type="var">E1</span></span> <span class="inlinecode">=</span> <span class="inlinecode"><span class="id" type="var">E2</span>)</span> <span class="inlinecode"><span class="id" type="keyword">in</span></span> <span class="inlinecode"><span class="id" type="var">H</span></span>&nbsp;allows<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;rewriting&nbsp;in&nbsp;the&nbsp;hypothesis&nbsp;<span class="inlinecode"><span class="id" type="var">H</span></span>&nbsp;rather&nbsp;than&nbsp;in&nbsp;the&nbsp;goal.&nbsp;*)</span><br/>

<br/>
</div>

<div class="doc">
The tactic <span class="inlinecode"><span class="id" type="var">cuts_rewrite</span></span> <span class="inlinecode">(<span class="id" type="var">E1</span></span> <span class="inlinecode">=</span> <span class="inlinecode"><span class="id" type="var">E2</span>)</span> is like
    <span class="inlinecode"><span class="id" type="var">asserts_rewrite</span></span> <span class="inlinecode">(<span class="id" type="var">E1</span></span> <span class="inlinecode">=</span> <span class="inlinecode"><span class="id" type="var">E2</span>)</span>, except that the equality <span class="inlinecode"><span class="id" type="var">E1</span></span> <span class="inlinecode">=</span> <span class="inlinecode"><span class="id" type="var">E2</span></span>
    appears as first subgoal. 
</div>
<div class="code code-tight">

<br/>
<span class="id" type="keyword">Theorem</span> <a name="EqualityExamples.mult_0_plus'"><span class="id" type="lemma">mult_0_plus'</span></a> : <span style="font-family: arial;">&forall;</span> <span class="id" type="var">n</span> <span class="id" type="var">m</span> : <span class="id" type="inductive">nat</span>,<br/>
&nbsp;&nbsp;(0 + <span class="id" type="var">n</span>) * <span class="id" type="var">m</span> = <span class="id" type="var">n</span> * <span class="id" type="var">m</span>.<br/>
<span class="id" type="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">intros</span> <span class="id" type="var">n</span> <span class="id" type="var">m</span>.<br/>
&nbsp;&nbsp;<span class="id" type="var">cuts_rewrite</span> (0 + <span class="id" type="var">n</span> = <span class="id" type="var">n</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">reflexivity</span>. <span class="comment">(*&nbsp;subgoal&nbsp;<span class="inlinecode"><span class="id" type="var">n</span>*<span class="id" type="var">m</span></span> <span class="inlinecode">=</span> <span class="inlinecode"><span class="id" type="var">m</span>*<span class="id" type="var">n</span></span>&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">reflexivity</span>. <span class="comment">(*&nbsp;subgoal&nbsp;<span class="inlinecode">0+<span class="id" type="var">n</span></span> <span class="inlinecode">=</span> <span class="inlinecode"><span class="id" type="var">n</span></span>&nbsp;*)</span><br/>
<span class="id" type="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
More generally, the tactics <span class="inlinecode"><span class="id" type="var">asserts_rewrite</span></span> and <span class="inlinecode"><span class="id" type="var">cuts_rewrite</span></span> 
    can be provided a lemma as argument. For example, one can write 
    <span class="inlinecode"><span class="id" type="var">asserts_rewrite</span></span> <span class="inlinecode">(<span style="font-family: arial;">&forall;</span></span> <span class="inlinecode"><span class="id" type="var">a</span></span> <span class="inlinecode"><span class="id" type="var">b</span>,</span> <span class="inlinecode"><span class="id" type="var">a</span>*(<span class="id" type="var">S</span></span> <span class="inlinecode"><span class="id" type="var">b</span>)</span> <span class="inlinecode">=</span> <span class="inlinecode"><span class="id" type="var">a</span>*<span class="id" type="var">b</span>+<span class="id" type="var">a</span>)</span>. 
    This formulation is useful when <span class="inlinecode"><span class="id" type="var">a</span></span> and <span class="inlinecode"><span class="id" type="var">b</span></span> are big terms,
    since there is no need to repeat their statements. 
</div>
<div class="code code-tight">

<br/>
<span class="id" type="keyword">Theorem</span> <a name="EqualityExamples.mult_0_plus''"><span class="id" type="lemma">mult_0_plus''</span></a> : <span style="font-family: arial;">&forall;</span> <span class="id" type="var">u</span> <span class="id" type="var">v</span> <span class="id" type="var">w</span> <span class="id" type="var">x</span> <span class="id" type="var">y</span> <span class="id" type="var">z</span>: <span class="id" type="inductive">nat</span>,<br/>
&nbsp;&nbsp;(<span class="id" type="var">u</span> + <span class="id" type="var">v</span>) * (<span class="id" type="constructor">S</span> (<span class="id" type="var">w</span> * <span class="id" type="var">x</span> + <span class="id" type="var">y</span>)) = <span class="id" type="var">z</span>.<br/>
<span class="id" type="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">intros</span>. <span class="id" type="var">asserts_rewrite</span> (<span style="font-family: arial;">&forall;</span> <span class="id" type="var">a</span> <span class="id" type="var">b</span>, <span class="id" type="var">a</span>*(<span class="id" type="constructor">S</span> <span class="id" type="var">b</span>) = <span class="id" type="var">a</span>*<span class="id" type="var">b</span>+<span class="id" type="var">a</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;first&nbsp;subgoal:&nbsp;&nbsp;<span class="inlinecode"><span style="font-family: arial;">&forall;</span></span> <span class="inlinecode"><span class="id" type="var">a</span></span> <span class="inlinecode"><span class="id" type="var">b</span>,</span> <span class="inlinecode"><span class="id" type="var">a</span>*(<span class="id" type="var">S</span></span> <span class="inlinecode"><span class="id" type="var">b</span>)</span> <span class="inlinecode">=</span> <span class="inlinecode"><span class="id" type="var">a</span>*<span class="id" type="var">b</span>+<span class="id" type="var">a</span></span>&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;second&nbsp;subgoal:&nbsp;<span class="inlinecode">(<span class="id" type="var">u</span></span> <span class="inlinecode">+</span> <span class="inlinecode"><span class="id" type="var">v</span>)</span> <span class="inlinecode">*</span> <span class="inlinecode">(<span class="id" type="var">w</span></span> <span class="inlinecode">*</span> <span class="inlinecode"><span class="id" type="var">x</span></span> <span class="inlinecode">+</span> <span class="inlinecode"><span class="id" type="var">y</span>)</span> <span class="inlinecode">+</span> <span class="inlinecode">(<span class="id" type="var">u</span></span> <span class="inlinecode">+</span> <span class="inlinecode"><span class="id" type="var">v</span>)</span> <span class="inlinecode">=</span> <span class="inlinecode"><span class="id" type="var">z</span></span>&nbsp;*)</span><br/>
<span class="id" type="var">Admitted</span>.<br/>

<br/>
</div>

<div class="doc">
<a name="lab756"></a><h2 class="section">The tactic <span class="inlinecode"><span class="id" type="var">substs</span></span></h2>

<div class="paragraph"> </div>

 The tactic <span class="inlinecode"><span class="id" type="var">substs</span></span> is similar to <span class="inlinecode"><span class="id" type="tactic">subst</span></span> except that it
    does not fail when the goal contains "circular equalities",
    such as <span class="inlinecode"><span class="id" type="var">x</span></span> <span class="inlinecode">=</span> <span class="inlinecode"><span class="id" type="var">f</span></span> <span class="inlinecode"><span class="id" type="var">x</span></span>. 
</div>
<div class="code code-tight">

<br/>
<span class="id" type="keyword">Lemma</span> <a name="EqualityExamples.demo_substs"><span class="id" type="lemma">demo_substs</span></a> : <span style="font-family: arial;">&forall;</span> <span class="id" type="var">x</span> <span class="id" type="var">y</span> (<span class="id" type="var">f</span>:<span class="id" type="inductive">nat</span><span style="font-family: arial;">&rarr;</span><span class="id" type="inductive">nat</span>), <br/>
&nbsp;&nbsp;<span class="id" type="var">x</span> = <span class="id" type="var">f</span> <span class="id" type="var">x</span> <span style="font-family: arial;">&rarr;</span> <span class="id" type="var">y</span> = <span class="id" type="var">x</span> <span style="font-family: arial;">&rarr;</span> <span class="id" type="var">y</span> = <span class="id" type="var">f</span> <span class="id" type="var">x</span>.<br/>
<span class="id" type="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">intros</span>. <span class="id" type="var">substs</span>. <span class="comment">(*&nbsp;<span class="inlinecode"><span class="id" type="tactic">subst</span></span>&nbsp;would&nbsp;fail&nbsp;here&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id" type="tactic">assumption</span>.<br/>
<span class="id" type="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
<a name="lab757"></a><h2 class="section">The tactic <span class="inlinecode"><span class="id" type="var">fequals</span></span></h2>

<div class="paragraph"> </div>

 The tactic <span class="inlinecode"><span class="id" type="var">fequals</span></span> is similar to <span class="inlinecode"><span class="id" type="tactic">f_equal</span></span> except that it 
    directly discharges all the trivial subgoals produced. Moreover, 
    the tactic <span class="inlinecode"><span class="id" type="var">fequals</span></span> features an enhanced treatment of equalities
    between tuples. 
</div>
<div class="code code-tight">

<br/>
<span class="id" type="keyword">Lemma</span> <a name="EqualityExamples.demo_fequals"><span class="id" type="lemma">demo_fequals</span></a> : <span style="font-family: arial;">&forall;</span> (<span class="id" type="var">a</span> <span class="id" type="var">b</span> <span class="id" type="var">c</span> <span class="id" type="var">d</span> <span class="id" type="var">e</span> : <span class="id" type="inductive">nat</span>) (<span class="id" type="var">f</span> : <span class="id" type="inductive">nat</span><span style="font-family: arial;">&rarr;</span><span class="id" type="inductive">nat</span><span style="font-family: arial;">&rarr;</span><span class="id" type="inductive">nat</span><span style="font-family: arial;">&rarr;</span><span class="id" type="inductive">nat</span><span style="font-family: arial;">&rarr;</span><span class="id" type="inductive">nat</span>),<br/>
&nbsp;&nbsp;<span class="id" type="var">a</span> = 1 <span style="font-family: arial;">&rarr;</span> <span class="id" type="var">b</span> = <span class="id" type="var">e</span> <span style="font-family: arial;">&rarr;</span> <span class="id" type="var">e</span> = 2 <span style="font-family: arial;">&rarr;</span> <br/>
&nbsp;&nbsp;<span class="id" type="var">f</span> <span class="id" type="var">a</span> <span class="id" type="var">b</span> <span class="id" type="var">c</span> <span class="id" type="var">d</span> = <span class="id" type="var">f</span> 1 2 <span class="id" type="var">c</span> 4.<br/>
<span class="id" type="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">intros</span>. <span class="id" type="var">fequals</span>.<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;subgoals&nbsp;<span class="inlinecode"><span class="id" type="var">a</span></span> <span class="inlinecode">=</span> <span class="inlinecode">1</span>,&nbsp;<span class="inlinecode"><span class="id" type="var">b</span></span> <span class="inlinecode">=</span> <span class="inlinecode">2</span>&nbsp;and&nbsp;<span class="inlinecode"><span class="id" type="var">c</span></span> <span class="inlinecode">=</span> <span class="inlinecode"><span class="id" type="var">c</span></span>&nbsp;are&nbsp;proved,&nbsp;<span class="inlinecode"><span class="id" type="var">d</span></span> <span class="inlinecode">=</span> <span class="inlinecode">4</span>&nbsp;remains&nbsp;*)</span><br/>
<span class="id" type="var">Admitted</span>.<br/>

<br/>
</div>

<div class="doc">
<a name="lab758"></a><h2 class="section">The tactic <span class="inlinecode"><span class="id" type="var">applys_eq</span></span></h2>

<div class="paragraph"> </div>

 The tactic <span class="inlinecode"><span class="id" type="var">applys_eq</span></span> is a variant of <span class="inlinecode"><span class="id" type="tactic">eapply</span></span> that introduces
    equalities for subterms that do not unify. For example, assume
    the goal is the proposition <span class="inlinecode"><span class="id" type="var">P</span></span> <span class="inlinecode"><span class="id" type="var">x</span></span> <span class="inlinecode"><span class="id" type="var">y</span></span> and assume we have the
    assumption <span class="inlinecode"><span class="id" type="var">H</span></span> asserting that <span class="inlinecode"><span class="id" type="var">P</span></span> <span class="inlinecode"><span class="id" type="var">x</span></span> <span class="inlinecode"><span class="id" type="var">z</span></span> holds. We know that we can 
    prove <span class="inlinecode"><span class="id" type="var">y</span></span> to be equal to <span class="inlinecode"><span class="id" type="var">z</span></span>. So, we could call the tactic
    <span class="inlinecode"><span class="id" type="var">assert_rewrite</span></span> <span class="inlinecode">(<span class="id" type="var">y</span></span> <span class="inlinecode">=</span> <span class="inlinecode"><span class="id" type="var">z</span>)</span> and change the goal to <span class="inlinecode"><span class="id" type="var">P</span></span> <span class="inlinecode"><span class="id" type="var">x</span></span> <span class="inlinecode"><span class="id" type="var">z</span></span>, but
    this would require copy-pasting the values of <span class="inlinecode"><span class="id" type="var">y</span></span> and <span class="inlinecode"><span class="id" type="var">z</span></span>.
    With the tactic <span class="inlinecode"><span class="id" type="var">applys_eq</span></span>, we can call <span class="inlinecode"><span class="id" type="var">applys_eq</span></span> <span class="inlinecode"><span class="id" type="var">H</span></span> <span class="inlinecode">1</span>, which
    proves the goal and leaves only the subgoal <span class="inlinecode"><span class="id" type="var">y</span></span> <span class="inlinecode">=</span> <span class="inlinecode"><span class="id" type="var">z</span></span>. The value <span class="inlinecode">1</span>
    given as argument to <span class="inlinecode"><span class="id" type="var">applys_eq</span></span> indicates that we want an equality
    to be introduced for the first argument of <span class="inlinecode"><span class="id" type="var">P</span></span> <span class="inlinecode"><span class="id" type="var">x</span></span> <span class="inlinecode"><span class="id" type="var">y</span></span> counting from
    the right. The three following examples illustrate the behavior
    of a call to <span class="inlinecode"><span class="id" type="var">applys_eq</span></span> <span class="inlinecode"><span class="id" type="var">H</span></span> <span class="inlinecode">1</span>, a call to <span class="inlinecode"><span class="id" type="var">applys_eq</span></span> <span class="inlinecode"><span class="id" type="var">H</span></span> <span class="inlinecode">2</span>, and a
    call to <span class="inlinecode"><span class="id" type="var">applys_eq</span></span> <span class="inlinecode"><span class="id" type="var">H</span></span> <span class="inlinecode">1</span> <span class="inlinecode">2</span>. 
</div>
<div class="code code-tight">

<br/>
<span class="id" type="keyword">Axiom</span> <a name="EqualityExamples.big_expression_using"><span class="id" type="axiom">big_expression_using</span></a> : <span class="id" type="inductive">nat</span><span style="font-family: arial;">&rarr;</span><span class="id" type="inductive">nat</span>. <span class="comment">(*&nbsp;Used&nbsp;in&nbsp;the&nbsp;example&nbsp;*)</span><br/>

<br/>
<span class="id" type="keyword">Lemma</span> <a name="EqualityExamples.demo_applys_eq_1"><span class="id" type="lemma">demo_applys_eq_1</span></a> : <span style="font-family: arial;">&forall;</span> (<span class="id" type="var">P</span>:<span class="id" type="inductive">nat</span><span style="font-family: arial;">&rarr;</span><span class="id" type="inductive">nat</span><span style="font-family: arial;">&rarr;</span><span class="id" type="keyword">Prop</span>) <span class="id" type="var">x</span> <span class="id" type="var">y</span> <span class="id" type="var">z</span>, <br/>
&nbsp;&nbsp;<span class="id" type="var">P</span> <span class="id" type="var">x</span> (<a class="idref" href="UseTactics.html#EqualityExamples.big_expression_using"><span class="id" type="axiom">big_expression_using</span></a> <span class="id" type="var">z</span>) <span style="font-family: arial;">&rarr;</span> <br/>
&nbsp;&nbsp;<span class="id" type="var">P</span> <span class="id" type="var">x</span> (<a class="idref" href="UseTactics.html#EqualityExamples.big_expression_using"><span class="id" type="axiom">big_expression_using</span></a> <span class="id" type="var">y</span>).<br/>
<span class="id" type="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" type="var">introv</span> <span class="id" type="var">H</span>. <span class="id" type="var">dup</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;The&nbsp;old&nbsp;proof:&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id" type="tactic">assert</span> (<span class="id" type="var">Eq</span>: <a class="idref" href="UseTactics.html#EqualityExamples.big_expression_using"><span class="id" type="axiom">big_expression_using</span></a> <span class="id" type="var">y</span> = <a class="idref" href="UseTactics.html#EqualityExamples.big_expression_using"><span class="id" type="axiom">big_expression_using</span></a> <span class="id" type="var">z</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="var">admit</span>. <span class="comment">(*&nbsp;Assume&nbsp;we&nbsp;can&nbsp;prove&nbsp;this&nbsp;equality&nbsp;somehow.&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <span class="id" type="var">Eq</span>. <span class="id" type="tactic">apply</span> <span class="id" type="var">H</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;The&nbsp;new&nbsp;proof:&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id" type="var">applys_eq</span> <span class="id" type="var">H</span> 1.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="var">admit</span>. <span class="comment">(*&nbsp;Assume&nbsp;we&nbsp;can&nbsp;prove&nbsp;this&nbsp;equality&nbsp;somehow.&nbsp;*)</span><br/>
<span class="id" type="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
If the mismatch was on the first argument of <span class="inlinecode"><span class="id" type="var">P</span></span> instead of
    the second, we would have written <span class="inlinecode"><span class="id" type="var">applys_eq</span></span> <span class="inlinecode"><span class="id" type="var">H</span></span> <span class="inlinecode">2</span>. Recall
    that the occurences are counted from the right. 
</div>
<div class="code code-tight">

<br/>
<span class="id" type="keyword">Lemma</span> <a name="EqualityExamples.demo_applys_eq_2"><span class="id" type="lemma">demo_applys_eq_2</span></a> : <span style="font-family: arial;">&forall;</span> (<span class="id" type="var">P</span>:<span class="id" type="inductive">nat</span><span style="font-family: arial;">&rarr;</span><span class="id" type="inductive">nat</span><span style="font-family: arial;">&rarr;</span><span class="id" type="keyword">Prop</span>) <span class="id" type="var">x</span> <span class="id" type="var">y</span> <span class="id" type="var">z</span>, <br/>
&nbsp;&nbsp;<span class="id" type="var">P</span> (<a class="idref" href="UseTactics.html#EqualityExamples.big_expression_using"><span class="id" type="axiom">big_expression_using</span></a> <span class="id" type="var">z</span>) <span class="id" type="var">x</span> <span style="font-family: arial;">&rarr;</span> <br/>
&nbsp;&nbsp;<span class="id" type="var">P</span> (<a class="idref" href="UseTactics.html#EqualityExamples.big_expression_using"><span class="id" type="axiom">big_expression_using</span></a> <span class="id" type="var">y</span>) <span class="id" type="var">x</span>.<br/>
<span class="id" type="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" type="var">introv</span> <span class="id" type="var">H</span>. <span class="id" type="var">applys_eq</span> <span class="id" type="var">H</span> 2.<br/>
<span class="id" type="var">Admitted</span>.<br/>

<br/>
</div>

<div class="doc">
When we have a mismatch on two arguments, we want to produce
    two equalities. To achieve this, we may call <span class="inlinecode"><span class="id" type="var">applys_eq</span></span> <span class="inlinecode"><span class="id" type="var">H</span></span> <span class="inlinecode">1</span> <span class="inlinecode">2</span>.
    More generally, the tactic <span class="inlinecode"><span class="id" type="var">applys_eq</span></span> expects a lemma and a
    sequence of natural numbers as arguments. 
</div>
<div class="code code-tight">

<br/>
<span class="id" type="keyword">Lemma</span> <a name="EqualityExamples.demo_applys_eq_3"><span class="id" type="lemma">demo_applys_eq_3</span></a> : <span style="font-family: arial;">&forall;</span> (<span class="id" type="var">P</span>:<span class="id" type="inductive">nat</span><span style="font-family: arial;">&rarr;</span><span class="id" type="inductive">nat</span><span style="font-family: arial;">&rarr;</span><span class="id" type="keyword">Prop</span>) <span class="id" type="var">x1</span> <span class="id" type="var">x2</span> <span class="id" type="var">y1</span> <span class="id" type="var">y2</span>, <br/>
&nbsp;&nbsp;<span class="id" type="var">P</span> (<a class="idref" href="UseTactics.html#EqualityExamples.big_expression_using"><span class="id" type="axiom">big_expression_using</span></a> <span class="id" type="var">x2</span>) (<a class="idref" href="UseTactics.html#EqualityExamples.big_expression_using"><span class="id" type="axiom">big_expression_using</span></a> <span class="id" type="var">y2</span>) <span style="font-family: arial;">&rarr;</span> <br/>
&nbsp;&nbsp;<span class="id" type="var">P</span> (<a class="idref" href="UseTactics.html#EqualityExamples.big_expression_using"><span class="id" type="axiom">big_expression_using</span></a> <span class="id" type="var">x1</span>) (<a class="idref" href="UseTactics.html#EqualityExamples.big_expression_using"><span class="id" type="axiom">big_expression_using</span></a> <span class="id" type="var">y1</span>).<br/>
<span class="id" type="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" type="var">introv</span> <span class="id" type="var">H</span>. <span class="id" type="var">applys_eq</span> <span class="id" type="var">H</span> 1 2.<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;produces&nbsp;two&nbsp;subgoals:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="inlinecode"><span class="id" type="var">big_expression_using</span></span> <span class="inlinecode"><span class="id" type="var">x1</span></span> <span class="inlinecode">=</span> <span class="inlinecode"><span class="id" type="var">big_expression_using</span></span> <span class="inlinecode"><span class="id" type="var">x2</span></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="inlinecode"><span class="id" type="var">big_expression_using</span></span> <span class="inlinecode"><span class="id" type="var">y1</span></span> <span class="inlinecode">=</span> <span class="inlinecode"><span class="id" type="var">big_expression_using</span></span> <span class="inlinecode"><span class="id" type="var">y2</span></span>&nbsp;*)</span><br/>
<span class="id" type="var">Admitted</span>.<br/>

<br/>
<span class="id" type="keyword">End</span> <a class="idref" href="UseTactics.html#"><span class="id" type="module">EqualityExamples</span></a>.<br/>

<br/>
</div>

<div class="doc">
<a name="lab759"></a><h1 class="section">Some convenient shorthands</h1>

<div class="paragraph"> </div>

 This section of the tutorial introduces a few tactics 
    that help make proof scripts shorter and more readable:

<div class="paragraph"> </div>

<ul class="doclist">
<li> <span class="inlinecode"><span class="id" type="var">unfolds</span></span> (without argument) for unfolding the head definition,

</li>
<li> <span class="inlinecode"><span class="id" type="var">false</span></span> for replacing the goal with <span class="inlinecode"><span class="id" type="var">False</span></span>,

</li>
<li> <span class="inlinecode"><span class="id" type="var">gen</span></span> as a shorthand for <span class="inlinecode"><span class="id" type="tactic">dependent</span></span> <span class="inlinecode"><span class="id" type="tactic">generalize</span></span>,

</li>
<li> <span class="inlinecode"><span class="id" type="var">skip</span></span> for skipping a subgoal (works with existential variables),

</li>
<li> <span class="inlinecode"><span class="id" type="var">sort</span></span> for moving propositions at the bottom of the proof context. 
</li>
</ul>

<div class="paragraph"> </div>

<a name="lab760"></a><h2 class="section">The tactic <span class="inlinecode"><span class="id" type="var">unfolds</span></span></h2>

</div>
<div class="code code-space">

<br/>
<span class="id" type="keyword">Module</span> <a name="UnfoldsExample"><span class="id" type="module">UnfoldsExample</span></a>.<br/>
&nbsp;&nbsp;<span class="id" type="keyword">Require</span> <span class="id" type="keyword">Import</span> <a class="idref" href="Hoare.html#"><span class="id" type="library">Hoare</span></a>.<br/>

<br/>
</div>

<div class="doc">
The tactic <span class="inlinecode"><span class="id" type="var">unfolds</span></span> (without any argument) unfolds the
    head constant of the goal. This tactic saves the need to 
    name the constant explicitly. 
</div>
<div class="code code-tight">

<br/>
<span class="id" type="keyword">Lemma</span> <a name="UnfoldsExample.bexp_eval_true"><span class="id" type="lemma">bexp_eval_true</span></a> : <span style="font-family: arial;">&forall;</span> <span class="id" type="var">b</span> <span class="id" type="var">st</span>,<br/>
&nbsp;&nbsp;<a class="idref" href="ImpList.html#beval"><span class="id" type="definition">beval</span></a> <span class="id" type="var">st</span> <span class="id" type="var">b</span> = <span class="id" type="constructor">true</span> <span style="font-family: arial;">&rarr;</span> (<a class="idref" href="Hoare.html#bassn"><span class="id" type="definition">bassn</span></a> <span class="id" type="var">b</span>) <span class="id" type="var">st</span>.<br/>
<span class="id" type="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">intros</span> <span class="id" type="var">b</span> <span class="id" type="var">st</span> <span class="id" type="var">Hbe</span>. <span class="id" type="var">dup</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;The&nbsp;old&nbsp;proof:&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id" type="tactic">unfold</span> <span class="id" type="var">bassn</span>. <span class="id" type="tactic">assumption</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;The&nbsp;new&nbsp;proof:&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id" type="var">unfolds</span>. <span class="id" type="tactic">assumption</span>.<br/>
<span class="id" type="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
Remark: contrary to the tactic <span class="inlinecode"><span class="id" type="var">hnf</span></span>, which unfolds all the
    head constants, <span class="inlinecode"><span class="id" type="var">unfolds</span></span> performs only a single unfolding. 
<div class="paragraph"> </div>

 Remark: the tactic <span class="inlinecode"><span class="id" type="var">unfolds</span></span> <span class="inlinecode"><span class="id" type="keyword">in</span></span> <span class="inlinecode"><span class="id" type="var">H</span></span> can be used to unfold the 
    head definition of the hypothesis <span class="inlinecode"><span class="id" type="var">H</span></span>. 
</div>
<div class="code code-tight">

<br/>
<span class="id" type="keyword">End</span> <a class="idref" href="UseTactics.html#"><span class="id" type="module">UnfoldsExample</span></a>.<br/>

<br/>
</div>

<div class="doc">
<a name="lab761"></a><h2 class="section">The tactics <span class="inlinecode"><span class="id" type="var">false</span></span> and <span class="inlinecode"><span class="id" type="var">tryfalse</span></span></h2>

<div class="paragraph"> </div>

 The tactic <span class="inlinecode"><span class="id" type="var">false</span></span> can be used to replace any goal with <span class="inlinecode"><span class="id" type="var">False</span></span>.
    In short, it is a shorthand for <span class="inlinecode"><span class="id" type="tactic">apply</span></span> <span class="inlinecode"><span class="id" type="var">ex_falso_quodlibet</span></span>. 
    Moreover, <span class="inlinecode"><span class="id" type="var">false</span></span> proves the goal if it contains an absurd 
    assumption, such as <span class="inlinecode"><span class="id" type="var">False</span></span> or <span class="inlinecode">0</span> <span class="inlinecode">=</span> <span class="inlinecode"><span class="id" type="var">S</span></span> <span class="inlinecode"><span class="id" type="var">n</span></span>, or if it contains
    contradictory assumptions, such as <span class="inlinecode"><span class="id" type="var">x</span></span> <span class="inlinecode">=</span> <span class="inlinecode"><span class="id" type="var">true</span></span> and <span class="inlinecode"><span class="id" type="var">x</span></span> <span class="inlinecode">=</span> <span class="inlinecode"><span class="id" type="var">false</span></span>. 
</div>
<div class="code code-tight">

<br/>
<span class="id" type="keyword">Lemma</span> <a name="demo_false"><span class="id" type="lemma">demo_false</span></a> : <br/>
&nbsp;&nbsp;<span style="font-family: arial;">&forall;</span> <span class="id" type="var">n</span>, <span class="id" type="constructor">S</span> <span class="id" type="var">n</span> = 1 <span style="font-family: arial;">&rarr;</span> <span class="id" type="var">n</span> = 0.<br/>
<span class="id" type="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">intros</span>. <span class="id" type="tactic">destruct</span> <span class="id" type="var">n</span>. <span class="id" type="tactic">reflexivity</span>. <span class="id" type="var">false</span>.<br/>
<span class="id" type="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
The tactic <span class="inlinecode"><span class="id" type="var">tryfalse</span></span> is a shorthand for <span class="inlinecode"><span class="id" type="tactic">try</span></span> <span class="inlinecode"><span class="id" type="var">solve</span></span> <span class="inlinecode">[<span class="id" type="var">false</span>]</span>:
    it tries to find a contradiction in the goal. The tactic
    <span class="inlinecode"><span class="id" type="var">tryfalse</span></span> is generally called after a case analysis. 
</div>
<div class="code code-tight">

<br/>
<span class="id" type="keyword">Lemma</span> <a name="demo_tryfalse"><span class="id" type="lemma">demo_tryfalse</span></a> : <br/>
&nbsp;&nbsp;<span style="font-family: arial;">&forall;</span> <span class="id" type="var">n</span>, <span class="id" type="constructor">S</span> <span class="id" type="var">n</span> = 1 <span style="font-family: arial;">&rarr;</span> <span class="id" type="var">n</span> = 0.<br/>
<span class="id" type="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">intros</span>. <span class="id" type="tactic">destruct</span> <span class="id" type="var">n</span>; <span class="id" type="var">tryfalse</span>. <span class="id" type="tactic">reflexivity</span>.<br/>
<span class="id" type="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
<a name="lab762"></a><h2 class="section">The tactic <span class="inlinecode"><span class="id" type="var">gen</span></span></h2>

<div class="paragraph"> </div>

 The tactic <span class="inlinecode"><span class="id" type="var">gen</span></span> is a shortand for <span class="inlinecode"><span class="id" type="tactic">generalize</span></span> <span class="inlinecode"><span class="id" type="tactic">dependent</span></span>
    that accepts several arguments at once. An invokation of 
    this tactic takes the form <span class="inlinecode"><span class="id" type="var">gen</span></span> <span class="inlinecode"><span class="id" type="var">x</span></span> <span class="inlinecode"><span class="id" type="var">y</span></span> <span class="inlinecode"><span class="id" type="var">z</span></span>. 
</div>
<div class="code code-tight">

<br/>
<span class="id" type="keyword">Module</span> <a name="GenExample"><span class="id" type="module">GenExample</span></a>.<br/>
&nbsp;&nbsp;<span class="id" type="keyword">Require</span> <span class="id" type="keyword">Import</span> <a class="idref" href="Stlc.html#"><span class="id" type="library">Stlc</span></a>.<br/>
&nbsp;&nbsp;<span class="id" type="keyword">Import</span> <span class="id" type="var">STLC</span>.<br/>

<br/>
<span class="id" type="keyword">Lemma</span> <a name="GenExample.substitution_preserves_typing"><span class="id" type="lemma">substitution_preserves_typing</span></a> : <span style="font-family: arial;">&forall;</span> <span style="font-family: serif; font-size:85%;">&Gamma;</span> <span class="id" type="var">x</span> <span class="id" type="var">U</span> <span class="id" type="var">v</span> <span class="id" type="var">t</span> <span class="id" type="var">S</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Stlc.html#STLC.has_type"><span class="id" type="inductive">has_type</span></a> (<a class="idref" href="SfLib.html#extend"><span class="id" type="definition">extend</span></a> <span style="font-family: serif; font-size:85%;">&Gamma;</span> <span class="id" type="var">x</span> <span class="id" type="var">U</span>) <span class="id" type="var">t</span> <span class="id" type="var">S</span> <span style="font-family: arial;">&rarr;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Stlc.html#STLC.has_type"><span class="id" type="inductive">has_type</span></a> <a class="idref" href="SfLib.html#empty"><span class="id" type="definition">empty</span></a> <span class="id" type="var">v</span> <span class="id" type="var">U</span> <span style="font-family: arial;">&rarr;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Stlc.html#STLC.has_type"><span class="id" type="inductive">has_type</span></a> <span style="font-family: serif; font-size:85%;">&Gamma;</span> (<a class="idref" href="Stlc.html#STLC.subst"><span class="id" type="definition">subst</span></a> <span class="id" type="var">v</span> <span class="id" type="var">x</span> <span class="id" type="var">t</span>) <span class="id" type="var">S</span>.<br/>
<span class="id" type="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" type="var">dup</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;The&nbsp;old&nbsp;proof:&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id" type="tactic">intros</span> <span style="font-family: serif; font-size:85%;">&Gamma;</span> <span class="id" type="var">x</span> <span class="id" type="var">U</span> <span class="id" type="var">v</span> <span class="id" type="var">t</span> <span class="id" type="var">S</span> <span class="id" type="var">Htypt</span> <span class="id" type="var">Htypv</span>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">generalize</span> <span class="id" type="tactic">dependent</span> <span class="id" type="var">S</span>. <span class="id" type="tactic">generalize</span> <span class="id" type="tactic">dependent</span> <span style="font-family: serif; font-size:85%;">&Gamma;</span>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">induction</span> <span class="id" type="var">t</span>; <span class="id" type="tactic">intros</span>; <span class="id" type="tactic">simpl</span>.<br/>
&nbsp;&nbsp;<span class="id" type="var">admit</span>. <span class="id" type="var">admit</span>. <span class="id" type="var">admit</span>. <span class="id" type="var">admit</span>. <span class="id" type="var">admit</span>. <span class="id" type="var">admit</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;The&nbsp;new&nbsp;proof:&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id" type="var">introv</span> <span class="id" type="var">Htypt</span> <span class="id" type="var">Htypv</span>. <span class="id" type="var">gen</span> <span class="id" type="var">S</span> <span style="font-family: serif; font-size:85%;">&Gamma;</span>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">induction</span> <span class="id" type="var">t</span>; <span class="id" type="tactic">intros</span>; <span class="id" type="tactic">simpl</span>.<br/>
&nbsp;&nbsp;<span class="id" type="var">admit</span>. <span class="id" type="var">admit</span>. <span class="id" type="var">admit</span>. <span class="id" type="var">admit</span>. <span class="id" type="var">admit</span>. <span class="id" type="var">admit</span>.<br/>
<span class="id" type="keyword">Qed</span>.<br/>

<br/>
<span class="id" type="keyword">End</span> <a class="idref" href="UseTactics.html#"><span class="id" type="module">GenExample</span></a>.<br/>

<br/>
</div>

<div class="doc">
<a name="lab763"></a><h2 class="section">The tactics <span class="inlinecode"><span class="id" type="var">skip</span></span>, <span class="inlinecode"><span class="id" type="var">skip_rewrite</span></span> and <span class="inlinecode"><span class="id" type="var">skip_goal</span></span></h2>

<div class="paragraph"> </div>

 The ability to admit a given subgoal is very useful when
    constructing proofs. It gives the ability to focus first 
    on the most interesting cases of a proof. The tactic <span class="inlinecode"><span class="id" type="var">skip</span></span>
    is like <span class="inlinecode"><span class="id" type="var">admit</span></span> except that it also works when the proof 
    includes existential variables. Recall that existential 
    variables are those whose name starts with a question mark, 
    e.g. <span class="inlinecode">?24</span>, and which are typically introduced by <span class="inlinecode"><span class="id" type="tactic">eapply</span></span>. 
</div>
<div class="code code-tight">

<br/>
<span class="id" type="keyword">Module</span> <a name="SkipExample"><span class="id" type="module">SkipExample</span></a>.<br/>
&nbsp;&nbsp;<span class="id" type="keyword">Require</span> <span class="id" type="keyword">Import</span> <a class="idref" href="Stlc.html#"><span class="id" type="library">Stlc</span></a>.<br/>
&nbsp;&nbsp;<span class="id" type="keyword">Import</span> <span class="id" type="var">STLC</span>.<br/>

<br/>
<span class="id" type="keyword">Example</span> <a name="SkipExample.astep_example1"><span class="id" type="definition">astep_example1</span></a> : <br/>
&nbsp;&nbsp;(<a class="idref" href="Imp.html#APlus"><span class="id" type="constructor">APlus</span></a> (<a class="idref" href="Imp.html#ANum"><span class="id" type="constructor">ANum</span></a> 3) (<a class="idref" href="Imp.html#AMult"><span class="id" type="constructor">AMult</span></a> (<a class="idref" href="Imp.html#ANum"><span class="id" type="constructor">ANum</span></a> 3) (<a class="idref" href="Imp.html#ANum"><span class="id" type="constructor">ANum</span></a> 4))) / <a class="idref" href="Imp.html#empty_state"><span class="id" type="definition">empty_state</span></a> <span style="font-family: arial;">&rArr;</span><span class="id" type="var">a</span>* (<a class="idref" href="Imp.html#ANum"><span class="id" type="constructor">ANum</span></a> 15).<br/>
<span class="id" type="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">eapply</span> <a class="idref" href="SfLib.html#rsc_step"><span class="id" type="constructor">rsc_step</span></a>. <span class="id" type="var">skip</span>. <span class="comment">(*&nbsp;<span class="inlinecode"><span class="id" type="var">admit</span></span>&nbsp;would&nbsp;not&nbsp;work&nbsp;here&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id" type="tactic">eapply</span> <a class="idref" href="SfLib.html#rsc_step"><span class="id" type="constructor">rsc_step</span></a>. <span class="id" type="var">skip</span>. <span class="id" type="var">skip</span>.<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;Note&nbsp;that&nbsp;because&nbsp;some&nbsp;unification&nbsp;variables&nbsp;have<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;not&nbsp;been&nbsp;instantiated,&nbsp;we&nbsp;still&nbsp;need&nbsp;to&nbsp;write<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="inlinecode"><span class="id" type="var">Admitted</span></span>&nbsp;instead&nbsp;of&nbsp;<span class="inlinecode"><span class="id" type="keyword">Qed</span></span>&nbsp;at&nbsp;the&nbsp;end&nbsp;of&nbsp;the&nbsp;proof.&nbsp;*)</span><br/>
<span class="id" type="var">Admitted</span>.<br/>

<br/>
</div>

<div class="doc">
The tactic <span class="inlinecode"><span class="id" type="var">skip</span></span> <span class="inlinecode"><span class="id" type="var">H</span>:</span> <span class="inlinecode"><span class="id" type="var">P</span></span> adds the hypothesis <span class="inlinecode"><span class="id" type="var">H</span>:</span> <span class="inlinecode"><span class="id" type="var">P</span></span> to the context, 
    without checking whether the proposition <span class="inlinecode"><span class="id" type="var">P</span></span> is true. 
    It is useful for exploiting a fact and postponing its proof. 
    Note: <span class="inlinecode"><span class="id" type="var">skip</span></span> <span class="inlinecode"><span class="id" type="var">H</span>:</span> <span class="inlinecode"><span class="id" type="var">P</span></span> is simply a shorthand for <span class="inlinecode"><span class="id" type="tactic">assert</span></span> <span class="inlinecode">(<span class="id" type="var">H</span>:<span class="id" type="var">P</span>).</span> <span class="inlinecode"><span class="id" type="var">skip</span>.</span> 
</div>
<div class="code code-tight">

<br/>
<span class="id" type="keyword">Theorem</span> <a name="SkipExample.demo_skipH"><span class="id" type="lemma">demo_skipH</span></a> : <span class="id" type="inductive">True</span>.<br/>
<span class="id" type="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" type="var">skip</span> <span class="id" type="var">H</span>: (<span style="font-family: arial;">&forall;</span> <span class="id" type="var">n</span> <span class="id" type="var">m</span> : <span class="id" type="inductive">nat</span>, (0 + <span class="id" type="var">n</span>) * <span class="id" type="var">m</span> = <span class="id" type="var">n</span> * <span class="id" type="var">m</span>).<br/>
<span class="id" type="var">Admitted</span>.<br/>

<br/>
</div>

<div class="doc">
The tactic <span class="inlinecode"><span class="id" type="var">skip_rewrite</span></span> <span class="inlinecode">(<span class="id" type="var">E1</span></span> <span class="inlinecode">=</span> <span class="inlinecode"><span class="id" type="var">E2</span>)</span> replaces <span class="inlinecode"><span class="id" type="var">E1</span></span> with <span class="inlinecode"><span class="id" type="var">E2</span></span> in
    the goal, without checking that <span class="inlinecode"><span class="id" type="var">E1</span></span> is actually equal to <span class="inlinecode"><span class="id" type="var">E2</span></span>. 
</div>
<div class="code code-tight">

<br/>
<span class="id" type="keyword">Theorem</span> <a name="SkipExample.mult_0_plus"><span class="id" type="lemma">mult_0_plus</span></a> : <span style="font-family: arial;">&forall;</span> <span class="id" type="var">n</span> <span class="id" type="var">m</span> : <span class="id" type="inductive">nat</span>,<br/>
&nbsp;&nbsp;(0 + <span class="id" type="var">n</span>) * <span class="id" type="var">m</span> = <span class="id" type="var">n</span> * <span class="id" type="var">m</span>.<br/>
<span class="id" type="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" type="var">dup</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;The&nbsp;old&nbsp;proof:&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id" type="tactic">intros</span> <span class="id" type="var">n</span> <span class="id" type="var">m</span>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">assert</span> (<span class="id" type="var">H</span>: 0 + <span class="id" type="var">n</span> = <span class="id" type="var">n</span>). <span class="id" type="var">skip</span>. <span class="id" type="tactic">rewrite</span> <span style="font-family: arial;">&rarr;</span> <span class="id" type="var">H</span>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">reflexivity</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;The&nbsp;new&nbsp;proof:&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id" type="tactic">intros</span> <span class="id" type="var">n</span> <span class="id" type="var">m</span>.<br/>
&nbsp;&nbsp;<span class="id" type="var">skip_rewrite</span> (0 + <span class="id" type="var">n</span> = <span class="id" type="var">n</span>).<br/>
&nbsp;&nbsp;<span class="id" type="tactic">reflexivity</span>.<br/>
<span class="id" type="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
Remark: the tactic <span class="inlinecode"><span class="id" type="var">skip_rewrite</span></span> can in fact be given a lemma
    statement as argument, in the same way as <span class="inlinecode"><span class="id" type="var">asserts_rewrite</span></span>. 
<div class="paragraph"> </div>

 The tactic <span class="inlinecode"><span class="id" type="var">skip_goal</span></span> adds the current goal as hypothesis.
    This cheat is useful to set up the structure of a proof by
    induction without having to worry about the induction hypothesis 
    being applied only to smaller arguments. Using <span class="inlinecode"><span class="id" type="var">skip_goal</span></span>, one
    can construct a proof in two steps: first, check that the main
    arguments go through without waisting time on fixing the details
    of the induction hypotheses, and then focus on fixing the 
    invokations of the induction hypothesis. 
</div>
<div class="code code-tight">

<br/>
<span class="id" type="keyword">Theorem</span> <a name="SkipExample.ceval_deterministic"><span class="id" type="lemma">ceval_deterministic</span></a>: <span style="font-family: arial;">&forall;</span> <span class="id" type="var">c</span> <span class="id" type="var">st</span> <span class="id" type="var">st1</span> <span class="id" type="var">st2</span>,<br/>
&nbsp;&nbsp;<span class="id" type="var">c</span> / <span class="id" type="var">st</span> <span style="font-family: arial;">&dArr;</span> <span class="id" type="var">st1</span> <span style="font-family: arial;">&rarr;</span><br/>
&nbsp;&nbsp;<span class="id" type="var">c</span> / <span class="id" type="var">st</span> <span style="font-family: arial;">&dArr;</span> <span class="id" type="var">st2</span> <span style="font-family: arial;">&rarr;</span><br/>
&nbsp;&nbsp;<span class="id" type="var">st1</span> = <span class="id" type="var">st2</span>.<br/>
<span class="id" type="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;<span class="inlinecode"><span class="id" type="var">skip_goal</span></span>&nbsp;creates&nbsp;an&nbsp;hypothesis&nbsp;called&nbsp;<span class="inlinecode"><span class="id" type="var">IH</span></span>&nbsp;asserting<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;that&nbsp;the&nbsp;statment&nbsp;of&nbsp;<span class="inlinecode"><span class="id" type="var">ceval_deterministic</span></span>&nbsp;is&nbsp;true.&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id" type="var">skip_goal</span>.<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;Of&nbsp;course,&nbsp;if&nbsp;we&nbsp;call&nbsp;<span class="inlinecode"><span class="id" type="tactic">assumption</span></span>&nbsp;here,&nbsp;then&nbsp;the&nbsp;goal&nbsp;is&nbsp;solved<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;right&nbsp;away,&nbsp;but&nbsp;the&nbsp;point&nbsp;is&nbsp;to&nbsp;do&nbsp;the&nbsp;proof&nbsp;and&nbsp;use&nbsp;<span class="inlinecode"><span class="id" type="var">IH</span></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;only&nbsp;at&nbsp;the&nbsp;places&nbsp;where&nbsp;we&nbsp;need&nbsp;an&nbsp;induction&nbsp;hypothesis.&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id" type="var">introv</span> <span class="id" type="var">E1</span> <span class="id" type="var">E2</span>. <span class="id" type="var">gen</span> <span class="id" type="var">st2</span>.<br/>
&nbsp;&nbsp;(<span class="id" type="var">ceval_cases</span> (<span class="id" type="tactic">induction</span> <span class="id" type="var">E1</span>) <span class="id" type="var">Case</span>); <span class="id" type="var">introv</span> <span class="id" type="var">E2</span>; <span class="id" type="var">inverts</span> <span class="id" type="var">E2</span> <span class="id" type="keyword">as</span>.<br/>
&nbsp;&nbsp;<span class="id" type="var">Case</span> "E_Skip". <span class="id" type="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;<span class="id" type="var">Case</span> "E_Ass".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">subst</span> <span class="id" type="var">n</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;<span class="id" type="var">Case</span> "E_Seq".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">intros</span> <span class="id" type="var">st3</span> <span class="id" type="var">Red1</span> <span class="id" type="var">Red2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">assert</span> (<span class="id" type="var">st'</span> = <span class="id" type="var">st3</span>) <span class="id" type="keyword">as</span> <span class="id" type="var">EQ1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="var">SCase</span> "Proof of assertion".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;was:&nbsp;<span class="inlinecode"><span class="id" type="tactic">apply</span></span> <span class="inlinecode"><span class="id" type="var">IHE1_1</span>;</span> <span class="inlinecode"><span class="id" type="tactic">assumption</span>.</span>&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;new:&nbsp;*)</span> <span class="id" type="tactic">eapply</span> <span class="id" type="var">IH</span>. <span class="id" type="tactic">eapply</span> <span class="id" type="var">E1_1</span>. <span class="id" type="tactic">eapply</span> <span class="id" type="var">Red1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">subst</span> <span class="id" type="var">st3</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;was:&nbsp;apply&nbsp;IHE1_2.&nbsp;assumption.]&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;new:&nbsp;*)</span> <span class="id" type="tactic">eapply</span> <span class="id" type="var">IH</span>. <span class="id" type="tactic">eapply</span> <span class="id" type="var">E1_2</span>. <span class="id" type="tactic">eapply</span> <span class="id" type="var">Red2</span>.<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;The&nbsp;other&nbsp;cases&nbsp;are&nbsp;similiar.&nbsp;*)</span><br/>
<span class="id" type="var">Admitted</span>.<br/>

<br/>
<span class="id" type="keyword">End</span> <a class="idref" href="UseTactics.html#"><span class="id" type="module">SkipExample</span></a>.<br/>

<br/>
</div>

<div class="doc">
<a name="lab764"></a><h2 class="section">The tactic <span class="inlinecode"><span class="id" type="var">sort</span></span></h2>

</div>
<div class="code code-space">

<br/>
<span class="id" type="keyword">Module</span> <a name="SortExamples"><span class="id" type="module">SortExamples</span></a>.<br/>
&nbsp;&nbsp;<span class="id" type="keyword">Require</span> <span class="id" type="keyword">Import</span> <a class="idref" href="Imp.html#"><span class="id" type="library">Imp</span></a>.<br/>

<br/>
</div>

<div class="doc">
The tactic <span class="inlinecode"><span class="id" type="var">sort</span></span> reorganizes the proof context by placing
    all the variables at the top and all the hypotheses at the
    bottom, thereby making the proof context more readable. 
</div>
<div class="code code-tight">

<br/>
<span class="id" type="keyword">Theorem</span> <a name="SortExamples.ceval_deterministic"><span class="id" type="lemma">ceval_deterministic</span></a>: <span style="font-family: arial;">&forall;</span> <span class="id" type="var">c</span> <span class="id" type="var">st</span> <span class="id" type="var">st1</span> <span class="id" type="var">st2</span>,<br/>
&nbsp;&nbsp;<span class="id" type="var">c</span> / <span class="id" type="var">st</span> <span style="font-family: arial;">&dArr;</span> <span class="id" type="var">st1</span> <span style="font-family: arial;">&rarr;</span><br/>
&nbsp;&nbsp;<span class="id" type="var">c</span> / <span class="id" type="var">st</span> <span style="font-family: arial;">&dArr;</span> <span class="id" type="var">st2</span> <span style="font-family: arial;">&rarr;</span><br/>
&nbsp;&nbsp;<span class="id" type="var">st1</span> = <span class="id" type="var">st2</span>.<br/>
<span class="id" type="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">intros</span> <span class="id" type="var">c</span> <span class="id" type="var">st</span> <span class="id" type="var">st1</span> <span class="id" type="var">st2</span> <span class="id" type="var">E1</span> <span class="id" type="var">E2</span>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">generalize</span> <span class="id" type="tactic">dependent</span> <span class="id" type="var">st2</span>.<br/>
&nbsp;&nbsp;(<span class="id" type="var">ceval_cases</span> (<span class="id" type="tactic">induction</span> <span class="id" type="var">E1</span>) <span class="id" type="var">Case</span>); <span class="id" type="tactic">intros</span> <span class="id" type="var">st2</span> <span class="id" type="var">E2</span>; <span class="id" type="var">inverts</span> <span class="id" type="var">E2</span>.<br/>
&nbsp;&nbsp;<span class="id" type="var">admit</span>. <span class="id" type="var">admit</span>. <span class="comment">(*&nbsp;Skipping&nbsp;some&nbsp;trivial&nbsp;cases&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id" type="var">sort</span>. <span class="comment">(*&nbsp;Observe&nbsp;how&nbsp;the&nbsp;context&nbsp;is&nbsp;reorganized&nbsp;*)</span><br/>
<span class="id" type="var">Admitted</span>.<br/>

<br/>
<span class="id" type="keyword">End</span> <a class="idref" href="UseTactics.html#"><span class="id" type="module">SortExamples</span></a>.<br/>

<br/>
</div>

<div class="doc">
<a name="lab765"></a><h1 class="section">Tactics for advanced lemma instantiation</h1>

<div class="paragraph"> </div>

 This last section describes a mechanism for instantiating a lemma 
    by providing some of its arguments and leaving other implicit. 
    Variables whose instantiation is not provided are turned into 
    existentential variables, and facts whose instantiation is not 
    provided are turned into subgoals. 

<div class="paragraph"> </div>

    Remark: this instantion mechanism goes far beyond the abilities of 
    the "Implicit Arguments" mechanism. The point of the instantiation 
    mechanism described in this section is that you will no longer need 
    to spend time figuring out how many underscore symbols you need to 
    write. 
<div class="paragraph"> </div>

 In this section, we'll use a useful feature of Coq for decomposing
    conjunctions and existentials. In short, a tactic like <span class="inlinecode"><span class="id" type="tactic">intros</span></span> or
    <span class="inlinecode"><span class="id" type="tactic">destruct</span></span> can be provided with a pattern <span class="inlinecode">(<span class="id" type="var">H1</span></span> <span class="inlinecode">&amp;</span> <span class="inlinecode"><span class="id" type="var">H2</span></span> <span class="inlinecode">&amp;</span> <span class="inlinecode"><span class="id" type="var">H3</span></span> <span class="inlinecode">&amp;</span> <span class="inlinecode"><span class="id" type="var">H4</span></span> <span class="inlinecode">&amp;</span> <span class="inlinecode"><span class="id" type="var">H5</span>)</span>,
    which is a shorthand for <span class="inlinecode">[<span class="id" type="var">H1</span></span> <span class="inlinecode">[<span class="id" type="var">H2</span></span> <span class="inlinecode">[<span class="id" type="var">H3</span></span> <span class="inlinecode">[<span class="id" type="var">H4</span></span> <span class="inlinecode"><span class="id" type="var">H5</span>]]]]</span>]. For example,
    <span class="inlinecode"><span class="id" type="tactic">destruct</span></span> <span class="inlinecode">(<span class="id" type="var">typing_inversion_var</span></span> <span class="inlinecode"><span class="id" type="var">_</span></span> <span class="inlinecode"><span class="id" type="var">_</span></span> <span class="inlinecode"><span class="id" type="var">_</span></span> <span class="inlinecode"><span class="id" type="var">Htypt</span>)</span> <span class="inlinecode"><span class="id" type="keyword">as</span></span> <span class="inlinecode">[<span class="id" type="var">T</span></span> <span class="inlinecode">[<span class="id" type="var">Hctx</span></span> <span class="inlinecode"><span class="id" type="var">Hsub</span>]].</span> 
    can be rewritten in the form
    <span class="inlinecode"><span class="id" type="tactic">destruct</span></span> <span class="inlinecode">(<span class="id" type="var">typing_inversion_var</span></span> <span class="inlinecode"><span class="id" type="var">_</span></span> <span class="inlinecode"><span class="id" type="var">_</span></span> <span class="inlinecode"><span class="id" type="var">_</span></span> <span class="inlinecode"><span class="id" type="var">Htypt</span>)</span> <span class="inlinecode"><span class="id" type="keyword">as</span></span> <span class="inlinecode">(<span class="id" type="var">T</span></span> <span class="inlinecode">&amp;</span> <span class="inlinecode"><span class="id" type="var">Hctx</span></span> <span class="inlinecode">&amp;</span> <span class="inlinecode"><span class="id" type="var">Hsub</span>).</span> 
<div class="paragraph"> </div>

<a name="lab766"></a><h2 class="section">Working of <span class="inlinecode"><span class="id" type="var">lets</span></span></h2>

<div class="paragraph"> </div>

 When we have a lemma (or an assumption) that we want to exploit,
    we often need to explicitly provide arguments to this lemma,
    writing something like:
    <span class="inlinecode"><span class="id" type="tactic">destruct</span></span> <span class="inlinecode">(<span class="id" type="var">typing_inversion_var</span></span> <span class="inlinecode"><span class="id" type="var">_</span></span> <span class="inlinecode"><span class="id" type="var">_</span></span> <span class="inlinecode"><span class="id" type="var">_</span></span> <span class="inlinecode"><span class="id" type="var">Htypt</span>)</span> <span class="inlinecode"><span class="id" type="keyword">as</span></span> <span class="inlinecode">(<span class="id" type="var">T</span></span> <span class="inlinecode">&amp;</span> <span class="inlinecode"><span class="id" type="var">Hctx</span></span> <span class="inlinecode">&amp;</span> <span class="inlinecode"><span class="id" type="var">Hsub</span>).</span>
    The need to write several times the "underscore" symbol is tedious.
    Not only we need to figure out how many of them to write down, but
    it also makes the proof scripts look prettly ugly. With the tactic
    <span class="inlinecode"><span class="id" type="var">lets</span></span>, one can simply write:
    <span class="inlinecode"><span class="id" type="var">lets</span></span> <span class="inlinecode">(<span class="id" type="var">T</span></span> <span class="inlinecode">&amp;</span> <span class="inlinecode"><span class="id" type="var">Hctx</span></span> <span class="inlinecode">&amp;</span> <span class="inlinecode"><span class="id" type="var">Hsub</span>):</span> <span class="inlinecode"><span class="id" type="var">typing_inversion_var</span></span> <span class="inlinecode"><span class="id" type="var">Htypt</span>.</span>

<div class="paragraph"> </div>

    In short, this tactic <span class="inlinecode"><span class="id" type="var">lets</span></span> allows to specialize a lemma on a bunch 
    of variables and hypotheses. The syntax is <span class="inlinecode"><span class="id" type="var">lets</span></span> <span class="inlinecode"><span class="id" type="var">I</span>:</span> <span class="inlinecode"><span class="id" type="var">E0</span></span> <span class="inlinecode"><span class="id" type="var">E1</span></span> <span class="inlinecode">..</span> <span class="inlinecode"><span class="id" type="var">EN</span></span>, 
    for building an hypothesis named <span class="inlinecode"><span class="id" type="var">I</span></span> by applying the fact <span class="inlinecode"><span class="id" type="var">E0</span></span> to the 
    arguments <span class="inlinecode"><span class="id" type="var">E1</span></span> to <span class="inlinecode"><span class="id" type="var">EN</span></span>. Not all the arguments need to be provided,
    however the arguments that are provided need to be provided in the
    correct order. The tactic relies on a first-match algorithm based on 
    types in order to figure out how the to instantiate the lemma with
    the arguments provided. 
</div>
<div class="code code-tight">

<br/>
<span class="id" type="keyword">Module</span> <a name="ExamplesLets"><span class="id" type="module">ExamplesLets</span></a>.<br/>
&nbsp;&nbsp;<span class="id" type="keyword">Require</span> <span class="id" type="keyword">Import</span> <a class="idref" href="Subtyping.html#"><span class="id" type="library">Subtyping</span></a>.<br/>

<br/>
<span class="comment">(*&nbsp;To&nbsp;illustrate&nbsp;the&nbsp;working&nbsp;of&nbsp;<span class="inlinecode"><span class="id" type="var">lets</span></span>,&nbsp;assume&nbsp;that&nbsp;we&nbsp;want&nbsp;to<br/>
&nbsp;&nbsp;&nbsp;exploit&nbsp;the&nbsp;following&nbsp;lemma.&nbsp;*)</span><br/>

<br/>
<span class="id" type="keyword">Axiom</span> <a name="ExamplesLets.typing_inversion_var"><span class="id" type="axiom">typing_inversion_var</span></a> : <span style="font-family: arial;">&forall;</span> (<span class="id" type="var">G</span>:<a class="idref" href="Subtyping.html#context"><span class="id" type="definition">context</span></a>) (<span class="id" type="var">x</span>:<a class="idref" href="SfLib.html#id"><span class="id" type="inductive">id</span></a>) (<span class="id" type="var">T</span>:<a class="idref" href="Subtyping.html#ty"><span class="id" type="inductive">ty</span></a>),<br/>
&nbsp;&nbsp;<a class="idref" href="Subtyping.html#has_type"><span class="id" type="inductive">has_type</span></a> <span class="id" type="var">G</span> (<a class="idref" href="Subtyping.html#tm_var"><span class="id" type="constructor">tm_var</span></a> <span class="id" type="var">x</span>) <span class="id" type="var">T</span> <span style="font-family: arial;">&rarr;</span><br/>
&nbsp;&nbsp;<span style="font-family: arial;">&exist;</span> <span class="id" type="var">S</span>, <span class="id" type="var">G</span> <span class="id" type="var">x</span> = <span class="id" type="constructor">Some</span> <span class="id" type="var">S</span> <span style="font-family: arial;">&and;</span> <a class="idref" href="Subtyping.html#subtype"><span class="id" type="inductive">subtype</span></a> <span class="id" type="var">S</span> <span class="id" type="var">T</span>.<br/>

<br/>
</div>

<div class="doc">
First, assume we have an assumption <span class="inlinecode"><span class="id" type="var">H</span></span> with the type of the form
    <span class="inlinecode"><span class="id" type="var">has_type</span></span> <span class="inlinecode"><span class="id" type="var">G</span></span> <span class="inlinecode">(<span class="id" type="var">tm_var</span></span> <span class="inlinecode"><span class="id" type="var">x</span>)</span> <span class="inlinecode"><span class="id" type="var">T</span></span>. We can obtain the conclusion of the
    lemma <span class="inlinecode"><span class="id" type="var">typing_inversion_var</span></span> by invoking the tactics 
    <span class="inlinecode"><span class="id" type="var">lets</span></span> <span class="inlinecode"><span class="id" type="var">K</span>:</span> <span class="inlinecode"><span class="id" type="var">typing_inversion_var</span></span> <span class="inlinecode"><span class="id" type="var">H</span></span>, as shown next. 
</div>
<div class="code code-tight">

<br/>
<span class="id" type="keyword">Lemma</span> <a name="ExamplesLets.demo_lets_1"><span class="id" type="lemma">demo_lets_1</span></a> : <span style="font-family: arial;">&forall;</span> (<span class="id" type="var">G</span>:<a class="idref" href="Subtyping.html#context"><span class="id" type="definition">context</span></a>) (<span class="id" type="var">x</span>:<a class="idref" href="SfLib.html#id"><span class="id" type="inductive">id</span></a>) (<span class="id" type="var">T</span>:<a class="idref" href="Subtyping.html#ty"><span class="id" type="inductive">ty</span></a>), <br/>
&nbsp;&nbsp;<a class="idref" href="Subtyping.html#has_type"><span class="id" type="inductive">has_type</span></a> <span class="id" type="var">G</span> (<a class="idref" href="Subtyping.html#tm_var"><span class="id" type="constructor">tm_var</span></a> <span class="id" type="var">x</span>) <span class="id" type="var">T</span> <span style="font-family: arial;">&rarr;</span> <span class="id" type="inductive">True</span>.<br/>
<span class="id" type="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">intros</span> <span class="id" type="var">G</span> <span class="id" type="var">x</span> <span class="id" type="var">T</span> <span class="id" type="var">H</span>. <span class="id" type="var">dup</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;step-by-step:&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id" type="var">lets</span> <span class="id" type="var">K</span>: <a class="idref" href="UseTactics.html#ExamplesLets.typing_inversion_var"><span class="id" type="axiom">typing_inversion_var</span></a> <span class="id" type="var">H</span>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">destruct</span> <span class="id" type="var">K</span> <span class="id" type="keyword">as</span> (<span class="id" type="var">S</span> &amp; <span class="id" type="var">Eq</span> &amp; <span class="id" type="var">Sub</span>).<br/>
&nbsp;&nbsp;<span class="id" type="var">admit</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;all-at-once:&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id" type="var">lets</span> (<span class="id" type="var">S</span> &amp; <span class="id" type="var">Eq</span> &amp; <span class="id" type="var">Sub</span>): <a class="idref" href="UseTactics.html#ExamplesLets.typing_inversion_var"><span class="id" type="axiom">typing_inversion_var</span></a> <span class="id" type="var">H</span>.<br/>
&nbsp;&nbsp;<span class="id" type="var">admit</span>.<br/>

<br/>
<span class="id" type="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
Assume now that we know the values of <span class="inlinecode"><span class="id" type="var">G</span></span>, <span class="inlinecode"><span class="id" type="var">x</span></span> and <span class="inlinecode"><span class="id" type="var">T</span></span> and we
    want to obtain <span class="inlinecode"><span class="id" type="var">S</span></span>, and have <span class="inlinecode"><span class="id" type="var">has_type</span></span> <span class="inlinecode"><span class="id" type="var">G</span></span> <span class="inlinecode">(<span class="id" type="var">tm_var</span></span> <span class="inlinecode"><span class="id" type="var">x</span>)</span> <span class="inlinecode"><span class="id" type="var">T</span></span> be produced
    as a subgoal. To indicate that we want all the remaining arguments
    of <span class="inlinecode"><span class="id" type="var">typing_inversion_var</span></span> to be produced as subgoals, we use a
    triple-underscore symbol <span class="inlinecode"><span class="id" type="var">___</span></span>. (We'll later introduce a shorthand
    tactic called <span class="inlinecode"><span class="id" type="var">forwards</span></span> to avoid writing triple underscores.) 
</div>
<div class="code code-tight">

<br/>
<span class="id" type="keyword">Lemma</span> <a name="ExamplesLets.demo_lets_2"><span class="id" type="lemma">demo_lets_2</span></a> : <span style="font-family: arial;">&forall;</span> (<span class="id" type="var">G</span>:<a class="idref" href="Subtyping.html#context"><span class="id" type="definition">context</span></a>) (<span class="id" type="var">x</span>:<a class="idref" href="SfLib.html#id"><span class="id" type="inductive">id</span></a>) (<span class="id" type="var">T</span>:<a class="idref" href="Subtyping.html#ty"><span class="id" type="inductive">ty</span></a>), <span class="id" type="inductive">True</span>.<br/>
<span class="id" type="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">intros</span> <span class="id" type="var">G</span> <span class="id" type="var">x</span> <span class="id" type="var">T</span>.<br/>
&nbsp;&nbsp;<span class="id" type="var">lets</span> (<span class="id" type="var">S</span> &amp; <span class="id" type="var">Eq</span> &amp; <span class="id" type="var">Sub</span>): <a class="idref" href="UseTactics.html#ExamplesLets.typing_inversion_var"><span class="id" type="axiom">typing_inversion_var</span></a> <span class="id" type="var">G</span> <span class="id" type="var">x</span> <span class="id" type="var">T</span> <span class="id" type="var">___</span>.<br/>
<span class="id" type="var">Admitted</span>.<br/>

<br/>
</div>

<div class="doc">
Usually, there is only one context <span class="inlinecode"><span class="id" type="var">G</span></span> and one type <span class="inlinecode"><span class="id" type="var">T</span></span> that are
    going to be suitable for proving <span class="inlinecode"><span class="id" type="var">has_type</span></span> <span class="inlinecode"><span class="id" type="var">G</span></span> <span class="inlinecode">(<span class="id" type="var">tm_var</span></span> <span class="inlinecode"><span class="id" type="var">x</span>)</span> <span class="inlinecode"><span class="id" type="var">T</span></span>, so
    we don't really need to bother giving <span class="inlinecode"><span class="id" type="var">G</span></span> and <span class="inlinecode"><span class="id" type="var">T</span></span> explicitly.
    It suffices to call <span class="inlinecode"><span class="id" type="var">lets</span></span> <span class="inlinecode">(<span class="id" type="var">S</span></span> <span class="inlinecode">&amp;</span> <span class="inlinecode"><span class="id" type="var">Eq</span></span> <span class="inlinecode">&amp;</span> <span class="inlinecode"><span class="id" type="var">Sub</span>):</span> <span class="inlinecode"><span class="id" type="var">typing_inversion_var</span></span> <span class="inlinecode"><span class="id" type="var">x</span></span>.
    The variables <span class="inlinecode"><span class="id" type="var">G</span></span> and <span class="inlinecode"><span class="id" type="var">T</span></span> are then instantiated using existential 
    variables. 
</div>
<div class="code code-tight">

<br/>
<span class="id" type="keyword">Lemma</span> <a name="ExamplesLets.demo_lets_3"><span class="id" type="lemma">demo_lets_3</span></a> : <span style="font-family: arial;">&forall;</span> (<span class="id" type="var">x</span>:<a class="idref" href="SfLib.html#id"><span class="id" type="inductive">id</span></a>), <span class="id" type="inductive">True</span>.<br/>
<span class="id" type="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">intros</span> <span class="id" type="var">x</span>.<br/>
&nbsp;&nbsp;<span class="id" type="var">lets</span> (<span class="id" type="var">S</span> &amp; <span class="id" type="var">Eq</span> &amp; <span class="id" type="var">Sub</span>): <a class="idref" href="UseTactics.html#ExamplesLets.typing_inversion_var"><span class="id" type="axiom">typing_inversion_var</span></a> <span class="id" type="var">x</span> <span class="id" type="var">___</span>.<br/>
<span class="id" type="var">Admitted</span>.<br/>

<br/>
</div>

<div class="doc">
We could be even more extreme and not give any argument to
    instantiate <span class="inlinecode"><span class="id" type="var">typing_inversion_var</span></span>. In this case, three unification
    variables are introduced. 
</div>
<div class="code code-tight">

<br/>
<span class="id" type="keyword">Lemma</span> <a name="ExamplesLets.demo_lets_4"><span class="id" type="lemma">demo_lets_4</span></a> : <span class="id" type="inductive">True</span>.<br/>
<span class="id" type="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" type="var">lets</span> (<span class="id" type="var">S</span> &amp; <span class="id" type="var">Eq</span> &amp; <span class="id" type="var">Sub</span>): <a class="idref" href="UseTactics.html#ExamplesLets.typing_inversion_var"><span class="id" type="axiom">typing_inversion_var</span></a> <span class="id" type="var">___</span>.<br/>
<span class="id" type="var">Admitted</span>.<br/>

<br/>
</div>

<div class="doc">
Note: if we provide <span class="inlinecode"><span class="id" type="var">lets</span></span> with only the name of the lemma as 
    argument, it simply adds this lemma in the proof context, without 
    trying to instantiate any of its arguments. 
</div>
<div class="code code-tight">

<br/>
<span class="id" type="keyword">Lemma</span> <a name="ExamplesLets.demo_lets_5"><span class="id" type="lemma">demo_lets_5</span></a> : <span class="id" type="inductive">True</span>.<br/>
<span class="id" type="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" type="var">lets</span> <span class="id" type="var">H</span>: <a class="idref" href="UseTactics.html#ExamplesLets.typing_inversion_var"><span class="id" type="axiom">typing_inversion_var</span></a>.<br/>
<span class="id" type="var">Admitted</span>.<br/>

<br/>
</div>

<div class="doc">
A last useful feature of <span class="inlinecode"><span class="id" type="var">lets</span></span> is the double-underscore symbol,
    which allows skipping an argument when several arguments have
    the same type. In the following example, we want <span class="inlinecode"><span class="id" type="var">m</span></span> to be
    instantiated as the value <span class="inlinecode">3</span>, but we want <span class="inlinecode"><span class="id" type="var">n</span></span> to be instantiated
    using an existential variable. 
</div>
<div class="code code-tight">

<br/>
<span class="id" type="keyword">Lemma</span> <a name="ExamplesLets.demo_lets_underscore"><span class="id" type="lemma">demo_lets_underscore</span></a> : <br/>
&nbsp;&nbsp;(<span style="font-family: arial;">&forall;</span> <span class="id" type="var">n</span> <span class="id" type="var">m</span>, <span class="id" type="var">n</span> &lt;= <span class="id" type="var">m</span> <span style="font-family: arial;">&rarr;</span> <span class="id" type="var">n</span> &lt; <span class="id" type="var">m</span>+1) <span style="font-family: arial;">&rarr;</span> <span class="id" type="inductive">True</span>.<br/>
<span class="id" type="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">intros</span> <span class="id" type="var">H</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;If&nbsp;we&nbsp;do&nbsp;not&nbsp;use&nbsp;a&nbsp;double&nbsp;underscore,&nbsp;the&nbsp;first&nbsp;argument,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;which&nbsp;is&nbsp;<span class="inlinecode"><span class="id" type="var">n</span></span>,&nbsp;gets&nbsp;instantiated&nbsp;as&nbsp;3.&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id" type="var">lets</span> <span class="id" type="var">K</span>: <span class="id" type="var">H</span> 3. <span class="comment">(*&nbsp;gives&nbsp;<span class="inlinecode"><span class="id" type="var">K</span></span>&nbsp;of&nbsp;type&nbsp;<span class="inlinecode"><span style="font-family: arial;">&forall;</span></span> <span class="inlinecode"><span class="id" type="var">m</span>,</span> <span class="inlinecode">3</span> <span class="inlinecode">&lt;=</span> <span class="inlinecode"><span class="id" type="var">m</span></span> <span class="inlinecode"><span style="font-family: arial;">&rarr;</span></span> <span class="inlinecode">3</span> <span class="inlinecode">&lt;</span> <span class="inlinecode"><span class="id" type="var">m</span>+1</span>&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">clear</span> <span class="id" type="var">K</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;The&nbsp;double&nbsp;underscore&nbsp;preceeding&nbsp;<span class="inlinecode">3</span>&nbsp;indicates&nbsp;that&nbsp;we&nbsp;want&nbsp;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;to&nbsp;skip&nbsp;a&nbsp;value&nbsp;that&nbsp;has&nbsp;the&nbsp;type&nbsp;<span class="inlinecode"><span class="id" type="var">nat</span></span>&nbsp;(because&nbsp;<span class="inlinecode">3</span>&nbsp;has&nbsp;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;the&nbsp;type&nbsp;<span class="inlinecode"><span class="id" type="var">nat</span></span>).&nbsp;So,&nbsp;the&nbsp;variable&nbsp;<span class="inlinecode"><span class="id" type="var">m</span></span>&nbsp;gets&nbsp;instiated&nbsp;as&nbsp;<span class="inlinecode">3</span>.&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id" type="var">lets</span> <span class="id" type="var">K</span>: <span class="id" type="var">H</span> <span class="id" type="var">__</span> 3. <span class="comment">(*&nbsp;gives&nbsp;<span class="inlinecode"><span class="id" type="var">K</span></span>&nbsp;of&nbsp;type&nbsp;<span class="inlinecode">?<span class="id" type="var">X</span></span> <span class="inlinecode">&lt;=</span> <span class="inlinecode">3</span> <span class="inlinecode"><span style="font-family: arial;">&rarr;</span></span> <span class="inlinecode">?<span class="id" type="var">X</span></span> <span class="inlinecode">&lt;</span> <span class="inlinecode">3+1</span>&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">clear</span> <span class="id" type="var">K</span>.<br/>
<span class="id" type="var">Admitted</span>.<br/>

<br/>
</div>

<div class="doc">
Note: one can write <span class="inlinecode"><span class="id" type="var">lets</span>:</span> <span class="inlinecode"><span class="id" type="var">E0</span></span> <span class="inlinecode"><span class="id" type="var">E1</span></span> <span class="inlinecode"><span class="id" type="var">E2</span></span> in place of <span class="inlinecode"><span class="id" type="var">lets</span></span> <span class="inlinecode"><span class="id" type="var">H</span>:</span> <span class="inlinecode"><span class="id" type="var">E0</span></span> <span class="inlinecode"><span class="id" type="var">E1</span></span> <span class="inlinecode"><span class="id" type="var">E2</span></span>
    when the name <span class="inlinecode"><span class="id" type="var">H</span></span> needs not be mentioned in the proof script.

<div class="paragraph"> </div>

    Note: the tactics <span class="inlinecode"><span class="id" type="var">lets</span></span> accepts up to five arguments. Another
    syntax if available for providing more than five arguments.
    It consists in using a list introduced with the keyword <span class="inlinecode">&gt;&gt;</span>,
    for example <span class="inlinecode"><span class="id" type="var">lets</span></span> <span class="inlinecode"><span class="id" type="var">H</span>:</span> <span class="inlinecode">(&gt;&gt;</span> <span class="inlinecode"><span class="id" type="var">E0</span></span> <span class="inlinecode"><span class="id" type="var">E1</span></span> <span class="inlinecode"><span class="id" type="var">E2</span></span> <span class="inlinecode"><span class="id" type="var">E3</span></span> <span class="inlinecode"><span class="id" type="var">E4</span></span> <span class="inlinecode"><span class="id" type="var">E5</span></span> <span class="inlinecode"><span class="id" type="var">E6</span></span> <span class="inlinecode"><span class="id" type="var">E7</span></span> <span class="inlinecode"><span class="id" type="var">E8</span></span> <span class="inlinecode"><span class="id" type="var">E9</span></span> <span class="inlinecode">10)</span>. 
</div>
<div class="code code-tight">

<br/>
<span class="id" type="keyword">End</span> <a class="idref" href="UseTactics.html#"><span class="id" type="module">ExamplesLets</span></a>.<br/>

<br/>
</div>

<div class="doc">
<a name="lab767"></a><h2 class="section">Working of <span class="inlinecode"><span class="id" type="var">applys</span></span>, <span class="inlinecode"><span class="id" type="var">forwards</span></span> and <span class="inlinecode"><span class="id" type="var">specializes</span></span></h2>

<div class="paragraph"> </div>

 The tactics <span class="inlinecode"><span class="id" type="var">applys</span></span>, <span class="inlinecode"><span class="id" type="var">forwards</span></span> and <span class="inlinecode"><span class="id" type="var">specializes</span></span> are 
    shorthand that may be used in place of <span class="inlinecode"><span class="id" type="var">lets</span></span> to perform
    specific tasks.
    &mdash; <span class="inlinecode"><span class="id" type="var">forwards</span></span> is a shorthand for instantiating all the arguments
    of a lemma. More precisely, <span class="inlinecode"><span class="id" type="var">forwards</span></span> <span class="inlinecode"><span class="id" type="var">H</span>:</span> <span class="inlinecode"><span class="id" type="var">E0</span></span> <span class="inlinecode"><span class="id" type="var">E1</span></span> <span class="inlinecode"><span class="id" type="var">E2</span></span> <span class="inlinecode"><span class="id" type="var">E3</span></span> is the 
    same as <span class="inlinecode"><span class="id" type="var">lets</span></span> <span class="inlinecode"><span class="id" type="var">H</span>:</span> <span class="inlinecode"><span class="id" type="var">E0</span></span> <span class="inlinecode"><span class="id" type="var">E1</span></span> <span class="inlinecode"><span class="id" type="var">E2</span></span> <span class="inlinecode"><span class="id" type="var">E3</span></span> <span class="inlinecode"><span class="id" type="var">___</span></span>, where the triple-underscore 
    has the same meaning as explained earlier on. 
    &mdash; <span class="inlinecode"><span class="id" type="var">applys</span></span> allows building a lemma using the advanced instantion
    mode of <span class="inlinecode"><span class="id" type="var">lets</span></span>, and then apply that lemma right away. So,
    <span class="inlinecode"><span class="id" type="var">applys</span></span> <span class="inlinecode"><span class="id" type="var">E0</span></span> <span class="inlinecode"><span class="id" type="var">E1</span></span> <span class="inlinecode"><span class="id" type="var">E2</span></span> <span class="inlinecode"><span class="id" type="var">E3</span></span> is the same as <span class="inlinecode"><span class="id" type="var">lets</span></span> <span class="inlinecode"><span class="id" type="var">H</span>:</span> <span class="inlinecode"><span class="id" type="var">E0</span></span> <span class="inlinecode"><span class="id" type="var">E1</span></span> <span class="inlinecode"><span class="id" type="var">E2</span></span> <span class="inlinecode"><span class="id" type="var">E3</span></span>
    followed with <span class="inlinecode"><span class="id" type="tactic">eapply</span></span> <span class="inlinecode"><span class="id" type="var">H</span></span> and then <span class="inlinecode"><span class="id" type="tactic">clear</span></span> <span class="inlinecode"><span class="id" type="var">H</span></span>. 
    &mdash; <span class="inlinecode"><span class="id" type="var">specializes</span></span> is a shorthand for instantiating in-place 
    an assumption from the context with particular arguments.
    More precisely, <span class="inlinecode"><span class="id" type="var">specializes</span></span> <span class="inlinecode"><span class="id" type="var">H</span></span> <span class="inlinecode"><span class="id" type="var">E0</span></span> <span class="inlinecode"><span class="id" type="var">E1</span></span> is the same as 
    <span class="inlinecode"><span class="id" type="var">lets</span></span> <span class="inlinecode"><span class="id" type="var">H'</span>:</span> <span class="inlinecode"><span class="id" type="var">H</span></span> <span class="inlinecode"><span class="id" type="var">E0</span></span> <span class="inlinecode"><span class="id" type="var">E1</span></span> followed with <span class="inlinecode"><span class="id" type="tactic">clear</span></span> <span class="inlinecode"><span class="id" type="var">H</span></span> and <span class="inlinecode"><span class="id" type="tactic">rename</span></span> <span class="inlinecode"><span class="id" type="var">H'</span></span> <span class="inlinecode"><span class="id" type="var">into</span></span> <span class="inlinecode"><span class="id" type="var">H</span></span>.

<div class="paragraph"> </div>

    Examples of use of <span class="inlinecode"><span class="id" type="var">applys</span></span> appear further on. Several examples 
    of use of <span class="inlinecode"><span class="id" type="var">specializes</span></span> and <span class="inlinecode"><span class="id" type="var">forwards</span></span> can be found in the 
    tutorial file <span class="inlinecode"><span class="id" type="var">UseAuto.v</span></span>. 
<div class="paragraph"> </div>

<a name="lab768"></a><h2 class="section">Example of instantiations</h2>

</div>
<div class="code code-space">

<br/>
<span class="id" type="keyword">Module</span> <a name="ExamplesInstantiations"><span class="id" type="module">ExamplesInstantiations</span></a>.<br/>
&nbsp;&nbsp;<span class="id" type="keyword">Require</span> <span class="id" type="keyword">Import</span> <a class="idref" href="Subtyping.html#"><span class="id" type="library">Subtyping</span></a>.<br/>

<br/>
</div>

<div class="doc">
In the following proof, <span class="inlinecode"><span class="id" type="var">lets</span></span> is used instead of <span class="inlinecode"><span class="id" type="tactic">destruct</span></span> 
    and <span class="inlinecode"><span class="id" type="var">applys</span></span> is used instead of <span class="inlinecode"><span class="id" type="tactic">apply</span></span> in several places.
    Those places indicated by a comment starting with "old:".  
    The exercise consists in also using <span class="inlinecode"><span class="id" type="var">lets</span></span> where indicated. 
</div>
<div class="code code-tight">

<br/>
<span class="id" type="keyword">Lemma</span> <a name="ExamplesInstantiations.substitution_preserves_typing"><span class="id" type="lemma">substitution_preserves_typing</span></a> : <span style="font-family: arial;">&forall;</span> <span style="font-family: serif; font-size:85%;">&Gamma;</span> <span class="id" type="var">x</span> <span class="id" type="var">U</span> <span class="id" type="var">v</span> <span class="id" type="var">t</span> <span class="id" type="var">S</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Subtyping.html#has_type"><span class="id" type="inductive">has_type</span></a> (<a class="idref" href="Subtyping.html#extend"><span class="id" type="definition">extend</span></a> <span style="font-family: serif; font-size:85%;">&Gamma;</span> <span class="id" type="var">x</span> <span class="id" type="var">U</span>) <span class="id" type="var">t</span> <span class="id" type="var">S</span> <span style="font-family: arial;">&rarr;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Subtyping.html#has_type"><span class="id" type="inductive">has_type</span></a> <a class="idref" href="Subtyping.html#empty"><span class="id" type="definition">empty</span></a> <span class="id" type="var">v</span> <span class="id" type="var">U</span> <span style="font-family: arial;">&rarr;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Subtyping.html#has_type"><span class="id" type="inductive">has_type</span></a> <span style="font-family: serif; font-size:85%;">&Gamma;</span> (<a class="idref" href="Subtyping.html#subst"><span class="id" type="definition">subst</span></a> <span class="id" type="var">v</span> <span class="id" type="var">x</span> <span class="id" type="var">t</span>) <span class="id" type="var">S</span>.<br/>
<span class="id" type="keyword">Proof</span> <span class="id" type="keyword">with</span> <span class="id" type="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">intros</span> <span style="font-family: serif; font-size:85%;">&Gamma;</span> <span class="id" type="var">x</span> <span class="id" type="var">U</span> <span class="id" type="var">v</span> <span class="id" type="var">t</span> <span class="id" type="var">S</span> <span class="id" type="var">Htypt</span> <span class="id" type="var">Htypv</span>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">generalize</span> <span class="id" type="tactic">dependent</span> <span class="id" type="var">S</span>. <span class="id" type="tactic">generalize</span> <span class="id" type="tactic">dependent</span> <span style="font-family: serif; font-size:85%;">&Gamma;</span>.<br/>
&nbsp;&nbsp;(<span class="id" type="var">tm_cases</span> (<span class="id" type="tactic">induction</span> <span class="id" type="var">t</span>) <span class="id" type="var">Case</span>); <span class="id" type="tactic">intros</span>; <span class="id" type="tactic">simpl</span>.<br/>
&nbsp;&nbsp;<span class="id" type="var">Case</span> "tm_var".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rename</span> <span class="id" type="var">i</span> <span class="id" type="var">into</span> <span class="id" type="var">y</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;An&nbsp;example&nbsp;where&nbsp;<span class="inlinecode"><span class="id" type="tactic">destruct</span></span>&nbsp;is&nbsp;replaced&nbsp;with&nbsp;<span class="inlinecode"><span class="id" type="var">lets</span></span>&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;old:&nbsp;destruct&nbsp;(typing_inversion_var&nbsp;_&nbsp;_&nbsp;_&nbsp;Htypt)&nbsp;as&nbsp;<span class="inlinecode"><span class="id" type="var">T</span></span> <span class="inlinecode">[<span class="id" type="var">Hctx</span></span> <span class="inlinecode"><span class="id" type="var">Hsub</span>]</span>.*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;new:&nbsp;*)</span> <span class="id" type="var">lets</span> (<span class="id" type="var">T</span>&amp;<span class="id" type="var">Hctx</span>&amp;<span class="id" type="var">Hsub</span>): <a class="idref" href="Subtyping.html#typing_inversion_var"><span class="id" type="lemma">typing_inversion_var</span></a> <span class="id" type="var">Htypt</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">unfold</span> <span class="id" type="var">extend</span> <span class="id" type="keyword">in</span> <span class="id" type="var">Hctx</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="var">remember</span> (<a class="idref" href="SfLib.html#beq_id"><span class="id" type="definition">beq_id</span></a> <span class="id" type="var">x</span> <span class="id" type="var">y</span>) <span class="id" type="keyword">as</span> <span class="id" type="var">e</span>. <span class="id" type="tactic">destruct</span> <span class="id" type="var">e</span>... <span class="comment">(*&nbsp;<span class="inlinecode"><span class="id" type="var">cases_if'</span></span>&nbsp;could&nbsp;be&nbsp;used&nbsp;here&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="var">SCase</span> "x=y".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">apply</span> <a class="idref" href="SfLib.html#beq_id_eq"><span class="id" type="lemma">beq_id_eq</span></a> <span class="id" type="keyword">in</span> <span class="id" type="var">Heqe</span>. <span class="id" type="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">inversion</span> <span class="id" type="var">Hctx</span>; <span class="id" type="tactic">subst</span>. <span class="id" type="tactic">clear</span> <span class="id" type="var">Hctx</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">apply</span> <a class="idref" href="Subtyping.html#context_invariance"><span class="id" type="lemma">context_invariance</span></a> <span class="id" type="keyword">with</span> <a class="idref" href="Subtyping.html#empty"><span class="id" type="definition">empty</span></a>...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">intros</span> <span class="id" type="var">x</span> <span class="id" type="var">Hcontra</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;A&nbsp;more&nbsp;involved&nbsp;example&nbsp;where&nbsp;<span class="inlinecode"><span class="id" type="tactic">destruct</span></span>&nbsp;is&nbsp;replaced&nbsp;with&nbsp;<span class="inlinecode"><span class="id" type="var">lets</span></span>&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;old:&nbsp;destruct&nbsp;(free_in_context&nbsp;_&nbsp;_&nbsp;S&nbsp;empty&nbsp;Hcontra)&nbsp;as&nbsp;<span class="inlinecode"><span class="id" type="var">T'</span></span> <span class="inlinecode"><span class="id" type="var">HT'</span></span>...&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;new:&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="var">lets</span> [<span class="id" type="var">T'</span> <span class="id" type="var">HT'</span>]: <a class="idref" href="Subtyping.html#free_in_context"><span class="id" type="lemma">free_in_context</span></a> <span class="id" type="var">S</span> <a class="idref" href="Subtyping.html#empty"><span class="id" type="definition">empty</span></a> <span class="id" type="var">Hcontra</span>...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">inversion</span> <span class="id" type="var">HT'</span>.<br/>
&nbsp;&nbsp;<span class="id" type="var">Case</span> "tm_app".<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;Exercise:&nbsp;replace&nbsp;the&nbsp;following&nbsp;<span class="inlinecode"><span class="id" type="tactic">destruct</span></span>&nbsp;with&nbsp;a&nbsp;<span class="inlinecode"><span class="id" type="var">lets</span></span>&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;old:&nbsp;destruct&nbsp;(typing_inversion_app&nbsp;_&nbsp;_&nbsp;_&nbsp;_&nbsp;Htypt)&nbsp;as&nbsp;<span class="inlinecode"><span class="id" type="var">T1</span></span> <span class="inlinecode">[<span class="id" type="var">Htypt1</span></span> <span class="inlinecode"><span class="id" type="var">Htypt2</span>]</span>.&nbsp;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;eapply&nbsp;T_App...&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;FILL&nbsp;IN&nbsp;HERE&nbsp;*)</span> <span class="id" type="var">admit</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" type="var">Case</span> "tm_abs".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rename</span> <span class="id" type="var">i</span> <span class="id" type="var">into</span> <span class="id" type="var">y</span>. <span class="id" type="tactic">rename</span> <span class="id" type="var">t</span> <span class="id" type="var">into</span> <span class="id" type="var">T1</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;Here&nbsp;is&nbsp;another&nbsp;example&nbsp;of&nbsp;using&nbsp;<span class="inlinecode"><span class="id" type="var">lets</span></span>&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;old:&nbsp;destruct&nbsp;(typing_inversion_abs&nbsp;_&nbsp;_&nbsp;_&nbsp;_&nbsp;_&nbsp;Htypt).&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;new:&nbsp;*)</span> <span class="id" type="var">lets</span> (<span class="id" type="var">T2</span>&amp;<span class="id" type="var">Hsub</span>&amp;<span class="id" type="var">Htypt2</span>): <a class="idref" href="Subtyping.html#typing_inversion_abs"><span class="id" type="lemma">typing_inversion_abs</span></a> <span class="id" type="var">Htypt</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;An&nbsp;example&nbsp;of&nbsp;where&nbsp;<span class="inlinecode"><span class="id" type="tactic">apply</span></span> <span class="inlinecode"><span class="id" type="keyword">with</span></span>&nbsp;can&nbsp;be&nbsp;replaced&nbsp;with&nbsp;<span class="inlinecode"><span class="id" type="var">applys</span></span>&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;old:&nbsp;apply&nbsp;T_Sub&nbsp;with&nbsp;(ty_arrow&nbsp;T1&nbsp;T2)...&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;new:&nbsp;*)</span> <span class="id" type="var">applys</span> <a class="idref" href="Subtyping.html#T_Sub"><span class="id" type="constructor">T_Sub</span></a> (<a class="idref" href="Subtyping.html#ty_arrow"><span class="id" type="constructor">ty_arrow</span></a> <span class="id" type="var">T1</span> <span class="id" type="var">T2</span>)...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">apply</span> <a class="idref" href="Subtyping.html#T_Abs"><span class="id" type="constructor">T_Abs</span></a>...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="var">remember</span> (<a class="idref" href="SfLib.html#beq_id"><span class="id" type="definition">beq_id</span></a> <span class="id" type="var">x</span> <span class="id" type="var">y</span>) <span class="id" type="keyword">as</span> <span class="id" type="var">e</span>. <span class="id" type="tactic">destruct</span> <span class="id" type="var">e</span>. <span class="comment">(*&nbsp;<span class="inlinecode"><span class="id" type="var">cases_if'</span></span>&nbsp;could&nbsp;be&nbsp;used&nbsp;here&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="var">SCase</span> "x=y".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">eapply</span> <a class="idref" href="Subtyping.html#context_invariance"><span class="id" type="lemma">context_invariance</span></a>...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">apply</span> <a class="idref" href="SfLib.html#beq_id_eq"><span class="id" type="lemma">beq_id_eq</span></a> <span class="id" type="keyword">in</span> <span class="id" type="var">Heqe</span>. <span class="id" type="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">intros</span> <span class="id" type="var">x</span> <span class="id" type="var">Hafi</span>. <span class="id" type="tactic">unfold</span> <span class="id" type="var">extend</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">destruct</span> (<a class="idref" href="SfLib.html#beq_id"><span class="id" type="definition">beq_id</span></a> <span class="id" type="var">y</span> <span class="id" type="var">x</span>)...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="var">SCase</span> "x&lt;&gt;y".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">apply</span> <span class="id" type="var">IHt</span>. <span class="id" type="tactic">eapply</span> <a class="idref" href="Subtyping.html#context_invariance"><span class="id" type="lemma">context_invariance</span></a>...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">intros</span> <span class="id" type="var">z</span> <span class="id" type="var">Hafi</span>. <span class="id" type="tactic">unfold</span> <span class="id" type="var">extend</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="var">remember</span> (<a class="idref" href="SfLib.html#beq_id"><span class="id" type="definition">beq_id</span></a> <span class="id" type="var">y</span> <span class="id" type="var">z</span>) <span class="id" type="keyword">as</span> <span class="id" type="var">e0</span>. <span class="id" type="tactic">destruct</span> <span class="id" type="var">e0</span>...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">apply</span> <a class="idref" href="SfLib.html#beq_id_eq"><span class="id" type="lemma">beq_id_eq</span></a> <span class="id" type="keyword">in</span> <span class="id" type="var">Heqe0</span>. <span class="id" type="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <span style="font-family: arial;">&larr;</span> <span class="id" type="var">Heqe</span>...<br/>
&nbsp;&nbsp;<span class="id" type="var">Case</span> "tm_true".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="var">lets</span>: <a class="idref" href="Subtyping.html#typing_inversion_true"><span class="id" type="lemma">typing_inversion_true</span></a> <span class="id" type="var">Htypt</span>...<br/>
&nbsp;&nbsp;<span class="id" type="var">Case</span> "tm_false".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="var">lets</span>: <a class="idref" href="Subtyping.html#typing_inversion_false"><span class="id" type="lemma">typing_inversion_false</span></a> <span class="id" type="var">Htypt</span>...<br/>
&nbsp;&nbsp;<span class="id" type="var">Case</span> "tm_if".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="var">lets</span> (<span class="id" type="var">Htyp1</span>&amp;<span class="id" type="var">Htyp2</span>&amp;<span class="id" type="var">Htyp3</span>): <a class="idref" href="Subtyping.html#typing_inversion_if"><span class="id" type="lemma">typing_inversion_if</span></a> <span class="id" type="var">Htypt</span>...<br/>
&nbsp;&nbsp;<span class="id" type="var">Case</span> "tm_unit".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;An&nbsp;example&nbsp;where&nbsp;<span class="inlinecode"><span class="id" type="tactic">assert</span></span>&nbsp;can&nbsp;be&nbsp;replaced&nbsp;with&nbsp;<span class="inlinecode"><span class="id" type="var">lets</span></span>&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;old:&nbsp;assert&nbsp;(subtype&nbsp;ty_Unit&nbsp;S)&nbsp;by&nbsp;apply&nbsp;(typing_inversion_unit&nbsp;_&nbsp;_&nbsp;Htypt)...&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;new:&nbsp;*)</span> <span class="id" type="var">lets</span>: <a class="idref" href="Subtyping.html#typing_inversion_unit"><span class="id" type="lemma">typing_inversion_unit</span></a> <span class="id" type="var">Htypt</span>...<br/>

<br/>

<br/>
<span class="id" type="keyword">Qed</span>.<br/>

<br/>
<span class="id" type="keyword">End</span> <a class="idref" href="UseTactics.html#"><span class="id" type="module">ExamplesInstantiations</span></a>.<br/>

<br/>
</div>
</div>

<div id="footer">
<hr/><a href="coqindex.html">Index</a><hr/>This page has been generated by <a href="http://www.lix.polytechnique.fr/coq/">coqdoc</a>
</div>

</div>

</body>
</html>